(self.webpackChunkarisucool=self.webpackChunkarisucool||[]).push([[512],{2512:(Zt,Mt,v)=>{"use strict";v.r(Mt),v.d(Mt,{GoodsListModule:()=>ve});var $=v(6814),xt=v(8109),z=v(5861),t=v(5879),J=v(9347),ut=v(2296),yt=v(5986),rt=v(6223),C=v(6825),Et=v(7044),ct=v(553),T=function(e){return e[e.BEFORE_RESERVATION=0]="BEFORE_RESERVATION",e[e.RESERVATION=1]="RESERVATION",e[e.END_OF_RESERVATION=2]="END_OF_RESERVATION",e[e.BEFORE_SALE=3]="BEFORE_SALE",e[e.ON_SALE=4]="ON_SALE",e[e.END_OF_SALE=5]="END_OF_SALE",e[e.BEFORE_RESALE=6]="BEFORE_RESALE",e[e.ON_RESALE=7]="ON_RESALE",e[e.END_OF_RESALE=8]="END_OF_RESALE",e[e.UNKNOWN=9]="UNKNOWN",e}(T||{}),Pt=v(4316),At=v(2779);let Tt=(()=>{var e;class s{constructor(i){this.appCacheService=i,this.GOODS_LIST_STORAGE_VERSION=1}init(){var i=this;return(0,z.Z)(function*(){i.storage||(i.storage=yield(0,Et.H)({name:"arisucoolGoodsListItemStatus",version:i.GOODS_LIST_STORAGE_VERSION}))})()}getGoodsList(i=!0){var o=this;return(0,z.Z)(function*(){yield o.init();const u=yield o.appCacheService.getCachedJson("arisuGoodsList",s.GOODS_LIST_JSON_CACHE_EXPIRES);if(u){let y=yield o.injectStatuses(u);return i&&(y=o.sortItems(y)),y}const l=yield fetch(ct.N.SHOPPING_LIST_JSON_API_URL);if(!l.ok)throw new Error("Failed to fetch goods list");const d=yield l.json();o.appCacheService.setCachedJson("arisuGoodsList",d);let h=yield o.injectStatuses(d);return i&&(h=o.sortItems(h)),h})()}getGoodsListAsCsv(){var i=this;return(0,z.Z)(function*(){const o=yield i.getGoodsList(!1);o.sort((d,h)=>d.id<h.id?-1:d.id===h.id?0:1);const u=o.map(d=>({...d,salesStatus:T[d.salesStatus],paymentYearMonth:d.selectedPaymentYearMonth&&""!==d.selectedPaymentYearMonth?d.selectedPaymentYearMonth:d.estimatedPaymentYearMonth,parentId:void 0}));for(const d of u)if(d.children){for(const h of d.children){const y={...h,salesStatus:T[h.salesStatus],paymentYearMonth:d.paymentYearMonth,parentId:d.id},D=u.findIndex(H=>H.id===d.id);u.splice(D+1,0,y)}delete d.children}return Pt.unparse({fields:["id","category","maker","name","priceWithTax","boxPriceWithTax","customPriceWithTax","customQuantity","paymentYearMonth","salesStatus","isChecked","isArchived","parentId"],data:u},{header:!0,delimiter:","})})()}getTotalPriceByGoodsList(i,o=!1){let u=0,l=0;for(const d of i)if(o||!d.isArchived)if(d.children){let h=this.getTotalPriceByGoodsList(d.children,o);u+=h.minPrice,l+=h.maxPrice}else{if(!d.isChecked)continue;void 0!==d.customPriceWithTax?(u+=d.customPriceWithTax*(d.customQuantity??1),l+=d.customPriceWithTax*(d.customQuantity??1)):(u+=d.priceWithTax??0,l+=d.boxPriceWithTax??d.priceWithTax??0)}return{minPrice:u,maxPrice:l}}isItemEndOfSale(i){if(!i.endOfSaleDate&&!i.confirmedEndOfSaleDate)return!1;const o=new Date,u=i.endOfResaleDate?new Date(i.endOfResaleDate):void 0,l=i.confirmedEndOfResaleDate?new Date(i.confirmedEndOfResaleDate):void 0;if(u){if(u<o)return!0;if(o<u)return!1}if(l&&l<o)return!0;const d=i.endOfSaleDate?new Date(i.endOfSaleDate):void 0,h=i.confirmedEndOfSaleDate?new Date(i.confirmedEndOfSaleDate):void 0;return!!(d&&d<o||h&&h<o)}setItemStatus(i,o,u,l,d=1,h){var y=this;return(0,z.Z)(function*(){if(yield y.init(),!y.storage)throw new Error("Failed to init storage");const D=yield y.storage.get(i.toString()),H=D?D.firstCheckedAt:(new Date).toISOString(),K={note:void 0,isChecked:o,isArchived:u,paymentYearMonth:l,savedAt:(new Date).toISOString(),firstCheckedAt:H,customPriceWithTax:h,customQuantity:d};y.storage.set(i.toString(),K)})()}injectStatuses(i,o){var u=this;return(0,z.Z)(function*(){let l=[];for(const d of i){if(!d||isNaN(d.id))continue;const h=u.getItemSalesStatus(d);d.salesStatus=h===T.UNKNOWN&&o?o.salesStatus:h;let y=u.getEstimatedPaymentYearMonth(d);d.children&&(d.children=yield u.injectStatuses(d.children,d)),l.push({...d,salesStatus:h,estimatedPaymentYearMonth:y,isChecked:!1,isArchived:!1})}for(const d of l){const h=yield u.storage?.get(d.id.toString());d.customPriceWithTax=h?h.customPriceWithTax:void 0,d.customQuantity=h?h.customQuantity:void 0,d.isChecked=!!h&&h.isChecked,d.isArchived=!!h&&h.isArchived,d.selectedPaymentYearMonth=h?h.paymentYearMonth:""}return l})()}sortItems(i){return(i=i.sort((o,u)=>void 0===o.reservationStartDate?1:void 0===u.reservationStartDate?-1:new Date(u.reservationStartDate).getTime()-new Date(o.reservationStartDate).getTime())).sort((o,u)=>void 0===o.saleDate||void 0===u.saleDate?0:new Date(u.saleDate).getTime()-new Date(o.saleDate).getTime())}getItemSalesStatus(i,o=new Date){let u=this.isItemEndOfSale(i),l=T.UNKNOWN;if(u)l=T.END_OF_SALE;else{const d=i.reservationStartDate;if(d){if(new Date(d)>o)return l=T.BEFORE_RESERVATION,l;l=T.RESERVATION}const h=i.reservationEndDate;if(h){const K=new Date(h);if(l===T.RESERVATION&&K>o)return l;K<o&&(l=T.END_OF_RESERVATION)}const y=i.saleDate;if(y)if(new Date(y)>o){if(l===T.RESERVATION)return l;l=T.BEFORE_SALE}else l=T.ON_SALE;const D=i.endOfSaleDate;D&&new Date(D)<o&&(l=T.END_OF_SALE);const H=i.resaleDate;H&&(l=new Date(H)>o?T.BEFORE_RESALE:T.ON_RESALE)}return l}getEstimatedPaymentYearMonth(i){let o=i.estimatedPaymentYearMonth;return o||(void 0===i.salesStatus&&console.warn("[GoodsListService] getEstimatedPaymentYearMonth - salesStatus is undefined",i),i.salesStatus===T.BEFORE_RESERVATION&&i.reservationEndDate?o=this.dateToYearMonth(i.reservationEndDate):i.salesStatus===T.BEFORE_RESERVATION&&i.saleDate?o=this.dateToYearMonth(i.saleDate):i.salesStatus===T.BEFORE_RESERVATION&&i.reservationStartDate?o=this.dateToYearMonth(i.reservationStartDate):i.salesStatus===T.RESERVATION&&i.reservationEndDate?o=this.dateToYearMonth(i.reservationEndDate):i.salesStatus===T.RESERVATION&&i.saleDate?o=this.dateToYearMonth(i.saleDate):i.salesStatus===T.END_OF_RESERVATION&&i.reservationEndDate?o=this.dateToYearMonth(i.reservationEndDate):i.salesStatus===T.END_OF_RESERVATION&&i.saleDate||i.salesStatus===T.BEFORE_SALE&&i.saleDate?o=this.dateToYearMonth(i.saleDate):i.salesStatus===T.END_OF_SALE&&i.endOfSaleDate?o=this.dateToYearMonth(i.endOfSaleDate):i.salesStatus===T.END_OF_SALE&&i.confirmedEndOfSaleDate&&(o=this.dateToYearMonth(i.confirmedEndOfSaleDate))),o||(o=this.dateToYearMonth(new Date)),o}dateToYearMonth(i){let o;if(i instanceof Date){if(isNaN(i.getTime()))return;o=i}else if(o=new Date(i),isNaN(o.getTime()))return;const u=o.getMonth()+1;return`${o.getFullYear()}/${u.toString().padStart(2,"0")}`}}return(e=s).GOODS_LIST_JSON_CACHE_EXPIRES=18e5,e.\u0275fac=function(i){return new(i||e)(t.LFG(At.g))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),s})();var Ot=v(1175),V=v(5313),ht=v(2596);function Bt(e,s){1&e&&(t.TgZ(0,"th",12),t._uU(1,"\u5e74\u6708"),t.qZA())}function Ft(e,s){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.Oqu(n.yearMonth)}}function kt(e,s){1&e&&(t.TgZ(0,"th",12),t._uU(1,"\u5408\u8a08\u91d1\u984d"),t.qZA())}function Dt(e,s){if(1&e&&(t.TgZ(0,"span",15),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.maxPrice,"JPY","symbol")," ")}}function _t(e,s){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"currency"),t.YNc(3,Dt,3,5,"span",14),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,2,n.minPrice,"JPY","symbol")," "),t.xp6(2),t.Q6J("ngIf",n.maxPrice&&n.maxPrice!=n.minPrice)}}function M(e,s){1&e&&(t.TgZ(0,"th",12),t._uU(1,"\u8cfc\u5165\u6570"),t.qZA())}function r(e,s){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.Oqu(n.numOfGoods)}}function a(e,s){1&e&&(t.TgZ(0,"th",16),t._uU(1,"\xa0"),t.qZA())}function c(e,s){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function _(e,s){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}function p(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"td",13)(1,"button",17),t.NdJ("click",function(o){const l=t.CHM(n).$implicit,d=t.oxw();return d.expandedElement=d.expandedElement===l?null:l,t.KtG(o.stopPropagation())}),t.YNc(2,c,2,0,"mat-icon",18),t.YNc(3,_,2,0,"mat-icon",18),t.qZA()()}if(2&e){const n=s.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.expandedElement!==n),t.xp6(1),t.Q6J("ngIf",i.expandedElement===n)}}function E(e,s){if(1&e&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&e){const n=t.oxw(3).$implicit;t.xp6(1),t.hij(" x ",n.customQuantity," ")}}function A(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",21),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.YNc(4,E,2,1,"span",22),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.Dn7(3,2,n.customPriceWithTax,"JPY","symbol")," "),t.xp6(2),t.Q6J("ngIf",n.customQuantity&&1!==n.customQuantity)}}function G(e,s){if(1&e&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(3).$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,n.priceWithTax,"JPY","symbol")," ")}}function w(e,s){if(1&e&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(3).$implicit;t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.boxPriceWithTax,"JPY","symbol")," ")}}function g(e,s){if(1&e&&(t.ynx(0),t.YNc(1,G,3,5,"span",24),t.YNc(2,w,3,5,"span",25),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",n.priceWithTax),t.xp6(1),t.Q6J("ngIf",n.boxPriceWithTax)}}function R(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"li"),t._uU(2),t._uU(3," \xa0\xa0 "),t.YNc(4,A,5,6,"ng-container",18),t.YNc(5,g,3,2,"ng-container",18),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("ngIf",n.customPriceWithTax),t.xp6(1),t.Q6J("ngIf",!n.customPriceWithTax)}}function x(e,s){if(1&e&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" x ",n.customQuantity," ")}}function ot(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",21),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.YNc(4,x,2,1,"span",22),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.Dn7(3,2,n.customPriceWithTax,"JPY","symbol")," "),t.xp6(2),t.Q6J("ngIf",n.customQuantity&&1!==n.customQuantity)}}function q(e,s){if(1&e&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,n.priceWithTax,"JPY","symbol")," ")}}function m(e,s){if(1&e&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.boxPriceWithTax,"JPY","symbol")," ")}}function k(e,s){if(1&e&&(t.ynx(0),t.YNc(1,q,3,5,"span",24),t.YNc(2,m,3,5,"span",25),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.priceWithTax),t.xp6(1),t.Q6J("ngIf",n.boxPriceWithTax)}}function W(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"li"),t._uU(2),t._uU(3," \xa0\xa0 "),t.YNc(4,ot,5,6,"ng-container",18),t.YNc(5,k,3,2,"ng-container",18),t.qZA(),t.BQk()),2&e){const n=s.$implicit;t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("ngIf",n.customPriceWithTax),t.xp6(1),t.Q6J("ngIf",!n.customPriceWithTax)}}function Z(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"li"),t._uU(2),t.TgZ(3,"ul"),t.YNc(4,W,6,3,"ng-container",20),t.qZA()(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("ngForOf",n.children)}}function U(e,s){if(1&e&&(t.ynx(0),t.YNc(1,R,6,3,"ng-container",18),t.YNc(2,Z,5,2,"ng-container",18),t.BQk()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("ngIf",!n.children),t.xp6(1),t.Q6J("ngIf",n.children)}}function Y(e,s){if(1&e&&(t.TgZ(0,"td",13)(1,"div",19)(2,"ul"),t.YNc(3,U,3,2,"ng-container",20),t.qZA()()()),2&e){const n=s.$implicit,i=t.oxw();t.uIk("colspan",i.displayedColumnsExpand.length),t.xp6(1),t.Q6J("@detailExpand",n==i.expandedElement?"expanded":"collapsed"),t.xp6(2),t.Q6J("ngForOf",n.goods)}}function Q(e,s){1&e&&t._UZ(0,"tr",27)}function f(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"tr",28),t.NdJ("click",function(){const u=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.expandedElement=l.expandedElement===u?null:u)}),t.qZA()}if(2&e){const n=s.$implicit,i=t.oxw();t.ekj("table-expanded-row",i.expandedElement===n)}}function P(e,s){1&e&&t._UZ(0,"tr",29)}const S=function(){return["expandedDetail"]};let I=(()=>{var e;class s{constructor(i){this.goodsListService=i,this.paymentReports=[],this.isIncludeArchiveItems=!1,this.displayedColumns=["yearMonth","price","numOfGoods"],this.displayedColumnsExpand=[...this.displayedColumns,"expand"],this.expandedElement=null}ngOnInit(){var i=this;return(0,z.Z)(function*(){yield i.load()})()}load(){var i=this;return(0,z.Z)(function*(){let l=(yield i.goodsListService.getGoodsList()).map(y=>{if(y.isChecked)return y;if(y.children){const D=y.children.filter(H=>H.isChecked);if(D.length>0)return y.children=D,y}}).filter(y=>void 0!==y);i.isIncludeArchiveItems||(l=l.filter(y=>!y.isArchived));const d={};for(const y of l){const D=y.selectedPaymentYearMonth?y.selectedPaymentYearMonth:y.estimatedPaymentYearMonth;d[D]||(d[D]=[]),d[D].push(y)}let h=Object.keys(d).sort().reverse();i.paymentReports=[];for(const y of h){const D=d[y],H=i.goodsListService.getTotalPriceByGoodsList(D,i.isIncludeArchiveItems);let K=0;for(const wt of D)K+=wt.customQuantity??1;i.paymentReports.push({yearMonth:y,minPrice:H.minPrice,maxPrice:H.maxPrice,goods:D,numOfGoods:K})}})()}ngOnChanges(){this.load()}}return(e=s).\u0275fac=function(i){return new(i||e)(t.Y36(Tt))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-payment-report"]],inputs:{isIncludeArchiveItems:"isIncludeArchiveItems"},features:[t.TTD],decls:18,vars:5,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","yearMonth"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","numOfGoods"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-element-row",3,"table-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","table-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["matTooltip","\u3053\u306e\u5e74\u6708\u306f\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u7b49\u304c\u3042\u308b\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",4,"ngIf"],["matTooltip","\u3053\u306e\u5e74\u6708\u306f\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u7b49\u304c\u3042\u308b\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059"],["mat-header-cell","","aria-label","row actions"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[1,"table-element-detail"],[4,"ngFor","ngForOf"],[1,"price"],["class","quantity",4,"ngIf"],[1,"quantity"],["class","price",4,"ngIf"],["class","price","matTooltip","\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",4,"ngIf"],["matTooltip","\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",1,"price"],["mat-header-row",""],["mat-row","",1,"table-element-row",3,"click"],["mat-row","",1,"table-detail-row"]],template:function(i,o){1&i&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,Bt,2,0,"th",2),t.YNc(3,Ft,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,kt,2,0,"th",2),t.YNc(6,_t,4,6,"td",3),t.BQk(),t.ynx(7,5),t.YNc(8,M,2,0,"th",2),t.YNc(9,r,2,1,"td",3),t.BQk(),t.ynx(10,6),t.YNc(11,a,2,0,"th",7),t.YNc(12,p,4,2,"td",3),t.BQk(),t.ynx(13,8),t.YNc(14,Y,4,3,"td",3),t.BQk(),t.YNc(15,Q,1,0,"tr",9),t.YNc(16,f,1,2,"tr",10),t.YNc(17,P,1,0,"tr",11),t.qZA()),2&i&&(t.Q6J("dataSource",o.paymentReports),t.xp6(15),t.Q6J("matHeaderRowDef",o.displayedColumnsExpand),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumnsExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(4,S)))},dependencies:[$.sg,$.O5,ut.RK,Ot.Hw,V.BZ,V.fO,V.as,V.w1,V.Dz,V.nj,V.ge,V.ev,V.XQ,V.Gk,ht.gM,$.H9],styles:["table[_ngcontent-%COMP%]{box-shadow:0 0 5px #0000001a}tr.table-detail-row[_ngcontent-%COMP%]{height:0}tr.table-element-row[_ngcontent-%COMP%]:not(.table-expanded-row):hover{background:whitesmoke}tr.table-element-row[_ngcontent-%COMP%]:not(.table-expanded-row):active{background:#efefef}.table-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.table-element-detail[_ngcontent-%COMP%]{background-color:#fff;overflow:hidden;display:flex}.table-element-detail[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-bottom:1rem}.table-element-detail[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.table-element-detail[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%], .table-element-detail[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{font-size:.8rem}"],data:{animation:[(0,C.X$)("detailExpand",[(0,C.SB)("collapsed",(0,C.oB)({height:"0px",minHeight:"0"})),(0,C.SB)("expanded",(0,C.oB)({height:"*"})),(0,C.eR)("expanded <=> collapsed",(0,C.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),s})(),F=(()=>{var e;class s{constructor(i){this.dialogRef=i,this.isIncludeArchiveItems=!1}}return(e=s).\u0275fac=function(i){return new(i||e)(t.Y36(J.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-payment-report-dialog"]],decls:8,vars:2,consts:[[3,"isIncludeArchiveItems"],["align","end"],[3,"ngModel","ngModelChange"],[2,"flex","1 1 auto"],["mat-dialog-close","","mat-stroked-button","","color","primary"]],template:function(i,o){1&i&&(t.TgZ(0,"mat-dialog-content"),t._UZ(1,"app-goods-payment-report",0),t.qZA(),t.TgZ(2,"mat-dialog-actions",1)(3,"mat-checkbox",2),t.NdJ("ngModelChange",function(l){return o.isIncludeArchiveItems=l}),t._uU(4,"\u30a2\u30fc\u30ab\u30a4\u30d6\u6e08\u307f\u3092\u542b\u3081\u308b"),t.qZA(),t._UZ(5,"span",3),t.TgZ(6,"button",4),t._uU(7,"OK"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("isIncludeArchiveItems",o.isIncludeArchiveItems),t.xp6(2),t.Q6J("ngModel",o.isIncludeArchiveItems))},dependencies:[ut.lW,yt.oG,J.ZT,J.xY,J.H8,rt.JJ,rt.On,I]}),s})();var j=v(2939),L=v(2032),b=v(9157);function at(e,s){if(1&e&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" \u6a19\u6e96\u4fa1\u683c: ",t.Dn7(2,1,n.data.item.priceWithTax,"JPY","symbol")," ")}}function X(e,s){if(1&e&&(t.TgZ(0,"span",15),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.data.item.boxPriceWithTax,"JPY","symbol")," ")}}function st(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"currency"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.hij(" ",t.Dn7(2,1,n.data.item.customQuantity*n.data.item.customPriceWithTax,"JPY","symbol")," ")}}function lt(e,s){1&e&&(t.ynx(0),t._uU(1," - "),t.BQk())}let tt=(()=>{var e;class s{constructor(i,o){this.dialogRef=i,this.data=o}ngOnInit(){}}return(e=s).\u0275fac=function(i){return new(i||e)(t.Y36(J.so),t.Y36(J.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-list-item-edit-dialog"]],decls:29,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["class","default-price",4,"ngIf"],["class","default-price","matTooltip","\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",4,"ngIf"],["floatLabel","always"],["matInput","","type","number","min","1","step","1","max","1000000",3,"ngModel","ngModelChange"],["matSuffix",""],["matInput","","type","number","min","1","step","1","max","100",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],[2,"font-size","0.8rem","margin-left","1rem"],[4,"ngIf"],[2,"flex","1 1 auto"],["mat-button","","mat-dialog-close",""],["mat-button","","color","primary","mat-dialog-close","OK","cdkFocusInitial",""],[1,"default-price"],["matTooltip","\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",1,"default-price"]],template:function(i,o){1&i&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"p"),t.YNc(4,at,3,5,"span",2),t.YNc(5,X,3,5,"span",3),t.qZA(),t.TgZ(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"\u8cfc\u5165\u3057\u305f\u91d1\u984d"),t.qZA(),t.TgZ(9,"input",5),t.NdJ("ngModelChange",function(l){return o.data.item.customPriceWithTax=l}),t.qZA(),t.TgZ(10,"span",6),t._uU(11,"\u5186"),t.qZA()(),t.TgZ(12,"mat-form-field",4)(13,"mat-label"),t._uU(14,"\u8cfc\u5165\u3057\u305f\u500b\u6570"),t.qZA(),t.TgZ(15,"input",7),t.NdJ("ngModelChange",function(l){return o.data.item.customQuantity=l}),t.qZA(),t.TgZ(16,"span",6),t._uU(17,"\u500b"),t.qZA()()(),t.TgZ(18,"div",8)(19,"span",9),t._uU(20," \u5c0f\u8a08: \xa0 "),t.YNc(21,st,3,5,"ng-container",10),t.YNc(22,lt,2,0,"ng-container",10),t._uU(23," \xa0 \xa0 "),t.qZA(),t._UZ(24,"span",11),t.TgZ(25,"button",12),t._uU(26,"\u30ad\u30e3\u30f3\u30bb\u30eb"),t.qZA(),t.TgZ(27,"button",13),t._uU(28," \u4fdd\u5b58 "),t.qZA()()),2&i&&(t.xp6(1),t.Oqu(o.data.item.name),t.xp6(3),t.Q6J("ngIf",o.data.item.priceWithTax),t.xp6(1),t.Q6J("ngIf",o.data.item.boxPriceWithTax),t.xp6(4),t.Q6J("ngModel",o.data.item.customPriceWithTax),t.xp6(6),t.Q6J("ngModel",o.data.item.customQuantity),t.xp6(6),t.Q6J("ngIf",o.data.item.customQuantity&&o.data.item.customPriceWithTax),t.xp6(1),t.Q6J("ngIf",!o.data.item.customQuantity||!o.data.item.customPriceWithTax))},dependencies:[$.O5,ut.lW,J.ZT,J.uh,J.xY,J.H8,L.Nt,b.KE,b.hX,b.R9,ht.gM,rt.Fj,rt.wV,rt.JJ,rt.qQ,rt.Fd,rt.On,$.H9],styles:["div[mat-dialog-content][_ngcontent-%COMP%]{display:flex;flex-direction:column}.default-price[_ngcontent-%COMP%]{font-size:.9rem}"]}),s})();var B=v(6973),et=v(5195),O=v(7988);function Ct(e,s){if(1&e&&(t.TgZ(0,"span",19),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,n.item.reservationStartDate,"yyyy/MM/dd")," \u304b\u3089 ")}}function dt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",17),t._uU(2," \u4e88\u7d04\u958b\u59cb\u524d "),t.qZA(),t.YNc(3,Ct,3,4,"span",18),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.item.reservationStartDate)}}function ft(e,s){if(1&e&&(t.TgZ(0,"span",22),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,n.item.reservationEndDate,"yyyy/MM/dd")," \u307e\u3067 ")}}function mt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",20),t._uU(2," \u4e88\u7d04\u53d7\u4ed8\u4e2d "),t.qZA(),t.YNc(3,ft,3,4,"span",21),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.item.reservationEndDate)}}function pt(e,s){1&e&&(t.ynx(0),t.TgZ(1,"span",23),t._uU(2," \u4e88\u7d04\u7d42\u4e86 "),t.qZA(),t.BQk())}function gt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",24),t._uU(2," \u767a\u58f2\u524d "),t.qZA(),t.TgZ(3,"span",25),t._uU(4),t.ALo(5,"date"),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(4),t.hij(" ",t.xi3(5,1,n.item.saleDate,"yyyy/MM/dd")," \u304b\u3089 ")}}function nt(e,s){if(1&e&&(t.TgZ(0,"span",28),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,n.item.endOfSaleDate,"yyyy/MM/dd")," \u307e\u3067 ")}}function vt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",26),t._uU(2," \u8ca9\u58f2\u4e2d "),t.qZA(),t.YNc(3,nt,3,4,"span",27),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.item.endOfSaleDate)}}function it(e,s){1&e&&(t.ynx(0),t.TgZ(1,"span",29),t._uU(2," \u7d42\u58f2 "),t.qZA(),t.BQk())}function St(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",30),t._uU(2," \u518d\u8ca9\u524d "),t.qZA(),t.TgZ(3,"span",31),t._uU(4),t.ALo(5,"date"),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(4),t.hij(" ",t.xi3(5,1,n.item.resaleDate,"yyyy/MM/dd")," \u304b\u3089 ")}}function bt(e,s){if(1&e&&(t.TgZ(0,"span",34),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,n.item.endOfResaleDate,"yyyy/MM/dd")," \u307e\u3067 ")}}function Rt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",32),t._uU(2," \u518d\u8ca9\u4e2d "),t.qZA(),t.YNc(3,bt,3,4,"span",33),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.item.endOfResaleDate)}}function Lt(e,s){1&e&&(t.ynx(0),t.TgZ(1,"span",35),t._uU(2," \u518d\u8ca9\u7d42\u4e86 "),t.qZA(),t.BQk())}function Nt(e,s){1&e&&(t.ynx(0),t.TgZ(1,"span",36),t._uU(2," \u4e0d\u660e "),t.qZA(),t.BQk())}function It(e,s){if(1&e&&(t.TgZ(0,"span",42),t._uU(1),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" x ",n.customQuantity," ")}}function Yt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",40),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.YNc(4,It,2,1,"span",41),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.Dn7(3,2,n.customPriceWithTax,"JPY","symbol")," "),t.xp6(2),t.Q6J("ngIf",n.customQuantity&&1!==n.customQuantity)}}function Qt(e,s){if(1&e&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,n.priceWithTax,"JPY","symbol")," ")}}function Gt(e,s){if(1&e&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.boxPriceWithTax,"JPY","symbol")," ")}}function Ut(e,s){if(1&e&&(t.ynx(0),t.YNc(1,Qt,3,5,"span",43),t.YNc(2,Gt,3,5,"span",44),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.priceWithTax),t.xp6(1),t.Q6J("ngIf",n.boxPriceWithTax)}}function Jt(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",37)(2,"mat-checkbox",38),t.NdJ("ngModelChange",function(o){const l=t.CHM(n).$implicit;return t.KtG(l.isChecked=o)})("ngModelChange",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.itemChange.emit(o.item))}),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0 "),t.YNc(5,Yt,5,6,"ng-container",2),t.YNc(6,Ut,3,2,"ng-container",2),t._uU(7," \xa0 "),t.TgZ(8,"button",39),t.NdJ("click",function(){const u=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.openEditDialog(u,!0))}),t.TgZ(9,"mat-icon"),t._uU(10,"edit"),t.qZA()()(),t.BQk()}if(2&e){const n=s.$implicit;t.xp6(2),t.Q6J("ngModel",n.isChecked),t.xp6(1),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("ngIf",n.customPriceWithTax),t.xp6(1),t.Q6J("ngIf",!n.customPriceWithTax)}}function qt(e,s){if(1&e&&(t.ynx(0),t.YNc(1,Jt,11,4,"ng-container",14),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.item.children)}}function Wt(e,s){if(1&e&&(t.TgZ(0,"span",42),t._uU(1),t.qZA()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" x ",n.item.customQuantity," ")}}function jt(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",40),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.YNc(4,Wt,2,1,"span",41),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.hij(" ",t.Dn7(3,2,n.item.customPriceWithTax,"JPY","symbol")," "),t.xp6(2),t.Q6J("ngIf",n.item.customQuantity&&1!==n.item.customQuantity)}}function $t(e,s){if(1&e&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",t.Dn7(2,1,n.item.priceWithTax,"JPY","symbol")," ")}}function zt(e,s){if(1&e&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.item.boxPriceWithTax,"JPY","symbol")," ")}}function Ht(e,s){if(1&e&&(t.ynx(0),t.YNc(1,$t,3,5,"span",43),t.YNc(2,zt,3,5,"span",44),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.item.priceWithTax),t.xp6(1),t.Q6J("ngIf",n.item.boxPriceWithTax)}}function Kt(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",37)(2,"mat-checkbox",38),t.NdJ("ngModelChange",function(o){t.CHM(n);const u=t.oxw();return t.KtG(u.item.isChecked=o)})("ngModelChange",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.itemChange.emit(o.item))}),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0 "),t.YNc(5,jt,5,6,"ng-container",2),t.YNc(6,Ht,3,2,"ng-container",2),t._uU(7," \xa0 "),t.TgZ(8,"button",39),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openEditDialog(o.item,!1))}),t.TgZ(9,"mat-icon"),t._uU(10,"edit"),t.qZA()()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngModel",n.item.isChecked),t.xp6(1),t.hij(" ",n.item.name," "),t.xp6(2),t.Q6J("ngIf",n.item.customPriceWithTax),t.xp6(1),t.Q6J("ngIf",!n.item.customPriceWithTax)}}function Vt(e,s){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check_box"),t.qZA())}function Xt(e,s){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check_box_outline_blank"),t.qZA())}function te(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",46),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(2),t.hij(" ",n.item.selectedPaymentYearMonth," ")}}function ee(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",47),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(2),t.hij(" ",n.item.estimatedPaymentYearMonth," ")}}function ne(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"span",49),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n.subLabel," ")}}function ie(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",48),t.NdJ("click",function(){const u=t.CHM(n).$implicit,l=t.oxw();return l.item.selectedPaymentYearMonth=u.yearMonth,t.KtG(l.itemChange.emit(l.item))}),t._uU(2),t.YNc(3,ne,3,1,"ng-container",2),t.qZA(),t.BQk()}if(2&e){const n=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("disabled",i.item.selectedPaymentYearMonth&&i.item.selectedPaymentYearMonth==n.yearMonth||!i.item.selectedPaymentYearMonth&&i.item.estimatedPaymentYearMonth==n.yearMonth),t.xp6(1),t.hij(" ",n.label," "),t.xp6(1),t.Q6J("ngIf",n.subLabel)}}function oe(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return o.item.isArchived=!0,t.KtG(o.itemChange.emit(o.item))}),t.TgZ(1,"mat-icon"),t._uU(2,"archive"),t.qZA()()}}function ae(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return o.item.isArchived=!1,t.KtG(o.itemChange.emit(o.item))}),t.TgZ(1,"mat-icon"),t._uU(2,"unarchive"),t.qZA()()}}const re=function(e,s,n,i,o,u,l,d,h,y){return{"sales-before-reservation":e,"sales-reservation":s,"sales-end-of-reservation":n,"sales-before-sale":i,"sales-on-sale":o,"sales-end-of-sale":u,"sales-before-resale":l,"sales-on-resale":d,"sales-end-of-resale":h,"sales-unknown":y}};let se=(()=>{var e;class s{constructor(i){this.matDialog=i,this.itemChange=new t.vpe,this.salesStatus=T,this.paymentYearMonths=[]}ngOnInit(){this.init()}init(){this.paymentYearMonths=[];let i=(new Date).toISOString().slice(0,7);this.item.selectedPaymentYearMonth?i=this.item.selectedPaymentYearMonth:this.item.estimatedPaymentYearMonth&&(i=this.item.estimatedPaymentYearMonth);const o=Number(i.slice(0,4)),u=Number(i.slice(5,7));for(let l=-5;l<=5;l++){const d=o+Math.floor((u+l-1)/12),h=(u+l-1)%12+1;let y;if(this.item.reservationEndDate){const D=new Date(this.item.reservationEndDate),H=D.getFullYear(),K=D.getMonth()+1;d==H&&h==K&&(y=" (\u4e88\u7d04\u7de0\u5207)")}if(this.item.saleDate){const D=new Date(this.item.saleDate),H=D.getFullYear(),K=D.getMonth()+1;d==H&&h==K&&(y=" (\u767a\u58f2)")}this.paymentYearMonths.push({yearMonth:`${d}/${h.toString().padStart(2,"0")}`,label:`${d}/${h.toString().padStart(2,"0")}`,subLabel:y})}}toggleAllChecks(){const i=this.isAllChecked();if(this.item.isChecked=!i,this.item.children)for(const o of this.item.children)o.isChecked=!i}isAllChecked(){return this.item.children?this.item.children.every(i=>i.isChecked):this.item.isChecked}isPastDate(i){return new Date(i).getTime()<Date.now()}openEditDialog(i,o=!1){var u=this;return(0,z.Z)(function*(){const l={...i};void 0===l.customQuantity&&(l.customQuantity=1),void 0===l.customPriceWithTax&&(l.customPriceWithTax=l.priceWithTax);const d=u.matDialog.open(tt,{data:{item:l}}),h=yield function N(e,s){const n="object"==typeof s;return new Promise((i,o)=>{let l,u=!1;e.subscribe({next:d=>{l=d,u=!0},error:o,complete:()=>{u?i(l):n?i(s.defaultValue):o(new B.K)}})})}(d.afterClosed());h&&"OK"===h&&(o&&u.item.children?(u.item.children=u.item.children.map(y=>y.id===i.id?l:y),u.itemChange.emit(u.item)):(void 0!==l.customQuantity&&(u.item.customQuantity=l.customQuantity),void 0!==l.customPriceWithTax&&(u.item.customPriceWithTax=l.customPriceWithTax),u.itemChange.emit(u.item)))})()}}return(e=s).\u0275fac=function(i){return new(i||e)(t.Y36(J.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-list-card"]],inputs:{item:"item"},outputs:{itemChange:"itemChange"},decls:41,vars:39,consts:[[3,"ngClass"],[1,"item-summary"],[4,"ngIf"],[1,"maker"],[1,"checklist"],[2,"display","flex","justify-content","end","gap","1rem","width","100%","padding-top","0"],["mat-icon-button","","color","primary","matTooltip","\u53c2\u8003\u30da\u30fc\u30b8\u3092\u958b\u304f","target","_blank","rel","noopener",3,"href","disabled"],[2,"margin-bottom","3px"],[2,"flex-grow","1"],["mat-icon-button","",3,"matTooltip","color","click"],["mat-icon-button","","color","primary",1,"payment-timing-button",3,"matMenuTriggerFor","matTooltip"],[1,"main"],[1,"arrow"],["paymentYearMonthMenu","matMenu"],[4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u89e3\u9664\u3059\u308b",3,"click",4,"ngIf"],[1,"sales-status","before-reservation"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u958b\u59cb\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u958b\u59cb\u65e5",1,"sales-date"],[1,"sales-status","reservation"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u7de0\u5207\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u7de0\u5207\u65e5",1,"sales-date"],[1,"sales-status","end-of-reservation"],[1,"sales-status","before-sale"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u767a\u58f2\u65e5",1,"sales-date"],[1,"sales-status","on-sale"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u7d42\u58f2\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u7d42\u58f2\u65e5",1,"sales-date"],[1,"sales-status","end-of-sale"],[1,"sales-status","before-resale"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u518d\u8ca9\u65e5",1,"sales-date"],[1,"sales-status","on-resale"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u518d\u8ca9\u7d42\u4e86\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u518d\u8ca9\u7d42\u4e86\u65e5",1,"sales-date"],[1,"sales-status","end-of-resale"],[1,"sales-status","unknown"],[1,"checklist-item"],[3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltip","\u8cfc\u5165\u4fa1\u683c\u30fb\u500b\u6570\u3092\u5909\u66f4",1,"price-edit-button",3,"click"],[1,"price"],["class","quantity",4,"ngIf"],[1,"quantity"],["class","price",4,"ngIf"],["class","price","matTooltip","\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",4,"ngIf"],["matTooltip","\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",1,"price"],[1,"payment-year-month","selected"],[1,"payment-year-month","estimated"],["mat-menu-item","",3,"disabled","click"],[2,"font-size","0.8rem"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b",3,"click"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u89e3\u9664\u3059\u308b",3,"click"]],template:function(i,o){if(1&i&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle",1),t.YNc(5,dt,4,1,"ng-container",2),t.YNc(6,mt,4,1,"ng-container",2),t.YNc(7,pt,3,0,"ng-container",2),t.YNc(8,gt,6,4,"ng-container",2),t.YNc(9,vt,4,1,"ng-container",2),t.YNc(10,it,3,0,"ng-container",2),t.YNc(11,St,6,4,"ng-container",2),t.YNc(12,Rt,4,1,"ng-container",2),t.YNc(13,Lt,3,0,"ng-container",2),t.YNc(14,Nt,3,0,"ng-container",2),t.TgZ(15,"span",3),t._uU(16),t.qZA()()(),t.TgZ(17,"mat-card-content")(18,"div",4),t.YNc(19,qt,2,1,"ng-container",2),t.YNc(20,Kt,11,4,"ng-container",2),t.qZA()(),t.TgZ(21,"mat-card-actions",5)(22,"a",6)(23,"mat-icon",7),t._uU(24,"link"),t.qZA()(),t._UZ(25,"div",8),t.TgZ(26,"button",9),t.NdJ("click",function(){return o.toggleAllChecks(),o.itemChange.emit(o.item)}),t.YNc(27,Vt,2,0,"mat-icon",2),t.YNc(28,Xt,2,0,"mat-icon",2),t.qZA(),t.TgZ(29,"button",10)(30,"mat-icon",11),t._uU(31,"currency_yen"),t.qZA(),t.TgZ(32,"mat-icon",12),t._uU(33,"arrow_drop_down"),t.qZA(),t.YNc(34,te,3,1,"ng-container",2),t.YNc(35,ee,3,1,"ng-container",2),t.qZA(),t.TgZ(36,"mat-menu",null,13),t.YNc(38,ie,4,3,"ng-container",14),t.qZA(),t.YNc(39,oe,3,0,"button",15),t.YNc(40,ae,3,0,"button",16),t.qZA()()),2&i){const u=t.MAs(37);t.Q6J("ngClass",t.rFY(28,re,[o.item.salesStatus===o.salesStatus.BEFORE_RESERVATION,o.item.salesStatus===o.salesStatus.RESERVATION,o.item.salesStatus===o.salesStatus.END_OF_RESERVATION,o.item.salesStatus===o.salesStatus.BEFORE_SALE,o.item.salesStatus===o.salesStatus.ON_SALE,o.item.salesStatus===o.salesStatus.END_OF_SALE,o.item.salesStatus===o.salesStatus.BEFORE_RESALE,o.item.salesStatus===o.salesStatus.ON_RESALE,o.item.salesStatus===o.salesStatus.END_OF_RESALE,o.item.salesStatus===o.salesStatus.UNKNOWN])),t.xp6(3),t.hij(" ",o.item.name,""),t.xp6(2),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.BEFORE_RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.END_OF_RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.BEFORE_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.ON_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.END_OF_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.BEFORE_RESALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.ON_RESALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.END_OF_RESALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.UNKNOWN),t.xp6(2),t.hij(" ",o.item.maker||"-"," "),t.xp6(3),t.Q6J("ngIf",o.item.children&&o.item.children.length>=1),t.xp6(1),t.Q6J("ngIf",!o.item.children||1==o.item.children.length),t.xp6(2),t.Q6J("href",o.item.url,t.LSH)("disabled",!o.item.url),t.xp6(4),t.Q6J("matTooltip",o.isAllChecked()?"\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059":"\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u308b")("color",o.isAllChecked()?"accent":""),t.xp6(1),t.Q6J("ngIf",o.isAllChecked()),t.xp6(1),t.Q6J("ngIf",!o.isAllChecked()),t.xp6(1),t.Q6J("matMenuTriggerFor",u)("matTooltip",o.item.selectedPaymentYearMonth?"\u6708\u3054\u3068\u306e\u5408\u8a08\u91d1\u984d\u3092\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b0\u30c3\u30ba\u306e\u652f\u6255\u3044\u6642\u671f\u306f "+o.item.selectedPaymentYearMonth+" \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002":"\u6708\u3054\u3068\u306e\u5408\u8a08\u91d1\u984d\u3092\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b0\u30c3\u30ba\u306e\u63a8\u6e2c\u3055\u308c\u308b\u652f\u6255\u3044\u6642\u671f\u306f"+o.item.estimatedPaymentYearMonth+"\u3067\u3059\u3002\u3000\u3000\u3000\u305f\u3060\u3057\u3001\u4fdd\u8a3c\u3059\u308b\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u652f\u6255\u3044\u65b9\u6cd5\u3001\u5e97\u8217\u3001\u8ca9\u58f2\u306e\u7a2e\u985e\u306b\u3088\u3063\u3066\u3082\u7570\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u5834\u5408\u306f\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u5e74\u6708\u3092\u9078\u3093\u3067\u304f\u3060\u3055\u3044\u3002"),t.xp6(5),t.Q6J("ngIf",o.item.selectedPaymentYearMonth),t.xp6(1),t.Q6J("ngIf",!o.item.selectedPaymentYearMonth&&o.item.estimatedPaymentYearMonth),t.xp6(3),t.Q6J("ngForOf",o.paymentYearMonths),t.xp6(1),t.Q6J("ngIf",!o.item.isArchived),t.xp6(1),t.Q6J("ngIf",o.item.isArchived)}},dependencies:[$.mk,$.sg,$.O5,ut.o6,ut.RK,et.a8,et.hq,et.dn,et.dk,et.$j,et.n5,yt.oG,Ot.Hw,O.VK,O.OP,O.p6,ht.gM,rt.JJ,rt.On,$.H9,$.uU],styles:["mat-card[_ngcontent-%COMP%]{padding-left:.5rem}mat-card.sales-before-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #1abc9c}mat-card.sales-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-end-of-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #7f8c8d}mat-card.sales-before-sale[_ngcontent-%COMP%]{border-left:.5rem solid #1abc9c}mat-card.sales-on-sale[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-end-of-sale[_ngcontent-%COMP%]{border-left:.5rem solid #7f8c8d}mat-card.sales-before-resale[_ngcontent-%COMP%]{border-left:.5rem solid #1abc9c}mat-card.sales-on-resale[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-end-of-resale[_ngcontent-%COMP%]{border-left:.5rem solid #7f8c8d}mat-card.sales-unknown[_ngcontent-%COMP%]{border-left:.5rem solid #aaaaaa}.item-summary[_ngcontent-%COMP%]   .sales-status.before-reservation[_ngcontent-%COMP%]{color:#1abc9c}.item-summary[_ngcontent-%COMP%]   .sales-status.reservation[_ngcontent-%COMP%]{color:#27ae60}.item-summary[_ngcontent-%COMP%]   .sales-status.end-of-reservation[_ngcontent-%COMP%]{color:#7f8c8d}.item-summary[_ngcontent-%COMP%]   .sales-status.before-sale[_ngcontent-%COMP%]{color:#1abc9c}.item-summary[_ngcontent-%COMP%]   .sales-status.on-sale[_ngcontent-%COMP%]{color:#27ae60}.item-summary[_ngcontent-%COMP%]   .sales-status.end-of-sale[_ngcontent-%COMP%]{color:#7f8c8d}.item-summary[_ngcontent-%COMP%]   .sales-status.before-resale[_ngcontent-%COMP%]{color:#1abc9c}.item-summary[_ngcontent-%COMP%]   .sales-status.on-resale[_ngcontent-%COMP%]{color:#27ae60}.item-summary[_ngcontent-%COMP%]   .sales-status.end-of-resale[_ngcontent-%COMP%]{color:#7f8c8d}.item-summary[_ngcontent-%COMP%]   .sales-status.unknown[_ngcontent-%COMP%]{color:#aaa}.item-summary[_ngcontent-%COMP%]   .sales-date[_ngcontent-%COMP%]{margin-left:1rem;font-weight:bolder}.item-summary[_ngcontent-%COMP%]   .maker[_ngcontent-%COMP%]{margin-left:2rem}.checklist[_ngcontent-%COMP%]{display:flex;flex-direction:column}.checklist[_ngcontent-%COMP%]   .checklist-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%], .checklist[_ngcontent-%COMP%]   .checklist-item[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{font-size:.8rem}.checklist[_ngcontent-%COMP%]   .checklist-item[_ngcontent-%COMP%]   .price-edit-button[_ngcontent-%COMP%]{color:#555;height:1.5rem;width:1.5rem;line-height:1.5rem;padding:0;vertical-align:middle}.checklist[_ngcontent-%COMP%]   .checklist-item[_ngcontent-%COMP%]   .price-edit-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;height:1rem;width:1rem;line-height:1rem;vertical-align:middle}.payment-timing-button[_ngcontent-%COMP%]{position:relative}.payment-timing-button[_ngcontent-%COMP%]   mat-icon.main[_ngcontent-%COMP%]{position:relative;line-height:1rem}.payment-timing-button[_ngcontent-%COMP%]   mat-icon.arrow[_ngcontent-%COMP%]{position:absolute;top:.7rem;right:-.4rem;line-height:1.2rem;opacity:.8}.payment-timing-button[_ngcontent-%COMP%]   .payment-year-month[_ngcontent-%COMP%]{position:absolute;font-size:.8rem;bottom:.2rem;left:0;right:0;text-align:center}@media screen and (max-width: 768px){.maker[_ngcontent-%COMP%]{display:none}mat-card-content[_ngcontent-%COMP%]{padding-top:.25rem;padding-left:0}}"]}),s})();function ue(e,s){1&e&&(t.TgZ(0,"div",9)(1,"p"),t._uU(2,"\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059...\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044..."),t.qZA()())}function ce(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",17),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.isShowingTotalPrice=!0)}),t.TgZ(2,"mat-icon"),t._uU(3,"currency_yen"),t.qZA()(),t.BQk()}}function le(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"currency"),t.ALo(3,"currency"),t.BQk()),2&e){const n=t.oxw(4);t.xp6(1),t.AsE(" ",t.Dn7(2,2,n.totalPrice.minPrice,"JPY","symbol")," \u301c ",t.Dn7(3,6,n.totalPrice.maxPrice,"JPY","symbol")," ")}}function de(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"currency"),t.BQk()),2&e){const n=t.oxw(4);t.xp6(1),t.hij(" ",t.Dn7(2,1,n.totalPrice.minPrice,"JPY","symbol")," ")}}function _e(e,s){if(1&e&&(t.TgZ(0,"span",19),t.YNc(1,le,4,10,"ng-container",2),t.YNc(2,de,3,5,"ng-container",2),t.qZA()),2&e){const n=t.oxw(3);t.Q6J("matTooltip",(n.isShowingArchivedItems?"\u30a2\u30fc\u30ab\u30a4\u30d6\u3055\u308c\u305f\u30b0\u30c3\u30ba\u3082\u542b\u3081\u3001\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u5546\u54c1\u306e\u5408\u8a08\u984d\u3067\u3059\u3002":"\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u5546\u54c1\u306e\u5408\u8a08\u984d\u3067\u3059\u3002")+(n.totalPrice.minPrice!==n.totalPrice.maxPrice?"\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u304c\u3042\u308b\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059":"")),t.xp6(1),t.Q6J("ngIf",n.totalPrice.minPrice!==n.totalPrice.maxPrice),t.xp6(1),t.Q6J("ngIf",n.totalPrice.minPrice===n.totalPrice.maxPrice)}}function me(e,s){if(1&e&&(t.ynx(0),t.YNc(1,_e,3,3,"span",18),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isShowingTotalPrice)}}function pe(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"app-goods-list-card",21),t.NdJ("itemChange",function(){t.CHM(n);const o=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.onItemStatusChange(o))}),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.Q6J("item",n)}}function ge(e,s){if(1&e&&(t.ynx(0),t.YNc(1,pe,1,1,"app-goods-list-card",20),t.BQk()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("ngIf",!1===n.isArchived)}}function fe(e,s){1&e&&t._UZ(0,"div",22)}function he(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",23),t._uU(2,"expand_less"),t.qZA(),t._uU(3),t.BQk()),2&e){const n=t.oxw(2);t.xp6(3),t.hij(" \u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u305f\u30b0\u30c3\u30ba\u3092\u975e\u8868\u793a (",n.numOfArchivedItems,"\u4ef6)\xa0 ")}}function Ce(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",23),t._uU(2,"expand_more"),t.qZA(),t._uU(3),t.BQk()),2&e){const n=t.oxw(2);t.xp6(3),t.hij(" \u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u305f\u30b0\u30c3\u30ba\u3092\u8868\u793a (",n.numOfArchivedItems,"\u4ef6)\xa0 ")}}function xe(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"app-goods-list-card",21),t.NdJ("itemChange",function(){t.CHM(n);const o=t.oxw().$implicit,u=t.oxw(3);return t.KtG(u.onItemStatusChange(o))}),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.Q6J("item",n)}}function ye(e,s){if(1&e&&(t.ynx(0),t.YNc(1,xe,1,1,"app-goods-list-card",20),t.BQk()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("ngIf",!0===n.isArchived)}}function Ee(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"div",24),t.YNc(2,ye,2,1,"ng-container",14),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",n.items)}}function Ae(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",10),t.YNc(2,ce,4,0,"ng-container",2),t.YNc(3,me,2,1,"ng-container",2),t.qZA(),t.TgZ(4,"div",11)(5,"button",12),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openPaymentReportDialog())}),t.TgZ(6,"mat-icon"),t._uU(7,"receipt_long"),t.qZA()()(),t.TgZ(8,"div",13),t.YNc(9,ge,2,1,"ng-container",14),t.qZA(),t.YNc(10,fe,1,0,"div",15),t.TgZ(11,"button",16),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.toggleShowingArchive())}),t.YNc(12,he,4,1,"ng-container",2),t.YNc(13,Ce,4,1,"ng-container",2),t.qZA(),t.YNc(14,Ee,3,1,"ng-container",2),t.BQk()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",!n.isShowingTotalPrice),t.xp6(1),t.Q6J("ngIf",n.isShowingTotalPrice),t.xp6(6),t.Q6J("ngForOf",n.items),t.xp6(1),t.Q6J("ngIf",n.isShowingArchivedItems),t.xp6(1),t.Q6J("matTooltip",n.isShowingArchivedItems?"\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u975e\u8868\u793a":"\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u8868\u793a")("disabled",0===n.numOfArchivedItems),t.xp6(1),t.Q6J("ngIf",n.isShowingArchivedItems),t.xp6(1),t.Q6J("ngIf",!n.isShowingArchivedItems),t.xp6(1),t.Q6J("ngIf",n.isShowingArchivedItems)}}const Te=[{path:"",component:(()=>{var e;class s{constructor(i,o,u){this.goodsListService=i,this.snackBar=o,this.matDialog=u,this.numOfArchivedItems=0,this.isShowingTotalPrice=!1,this.totalPrice={minPrice:0,maxPrice:0},this.isShowingArchivedItems=!1}ngOnInit(){var i=this;return(0,z.Z)(function*(){i.load()})()}load(){var i=this;return(0,z.Z)(function*(){try{i.items=yield i.goodsListService.getGoodsList(),i.calculateStatuses(i.items)}catch(o){i.snackBar.open(`\u30a8\u30e9\u30fc: ${o.message}`,"OK")}})()}onItemStatusChange(i){var o=this;return(0,z.Z)(function*(){let u=i.selectedPaymentYearMonth&&""!=i.selectedPaymentYearMonth?i.selectedPaymentYearMonth:i.estimatedPaymentYearMonth;if(console.log(i.customQuantity,i.customPriceWithTax),yield o.goodsListService.setItemStatus(i.id,i.isChecked,i.isArchived,u,i.customQuantity,i.customPriceWithTax),i.children)for(const l of i.children)yield o.goodsListService.setItemStatus(l.id,l.isChecked,i.isArchived,u,l.customQuantity,l.customPriceWithTax);o.snackBar.open("\u5909\u66f4\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f",void 0,{duration:1e3}),o.calculateStatuses()})()}calculateStatuses(i){var o=this;return(0,z.Z)(function*(){i||(i=yield o.goodsListService.getGoodsList()),o.totalPrice=o.goodsListService.getTotalPriceByGoodsList(i,o.isShowingArchivedItems),o.numOfArchivedItems=i.filter(u=>u.isArchived).length})()}toggleShowingArchive(){var i=this;return(0,z.Z)(function*(){i.isShowingArchivedItems=!i.isShowingArchivedItems,i.totalPrice=i.goodsListService.getTotalPriceByGoodsList(yield i.goodsListService.getGoodsList(),i.isShowingArchivedItems)})()}openPaymentReportDialog(){this.matDialog.open(F,{maxWidth:"96vw"})}exportAsCsv(){var i=this;return(0,z.Z)(function*(){const o=yield i.goodsListService.getGoodsListAsCsv(),u=new Date,d=`goods-list-${[u.getFullYear(),(u.getMonth()+1).toString().padStart(2,"0"),u.getDate().toString().padStart(2,"0"),"-",u.getHours().toString().padStart(2,"0"),u.getMinutes().toString().padStart(2,"0"),u.getSeconds().toString().padStart(2,"0")].join("")}.csv`,h=new Blob([o],{type:"text/csv"}),y=window.URL.createObjectURL(h),D=document.createElement("a");D.href=y,D.download=d,D.click(),window.URL.revokeObjectURL(y),i.snackBar.open("\u4e3b\u306a\u60c5\u5831\u3092CSV\u3068\u3057\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f",void 0,{duration:2e3})})()}}return(e=s).\u0275fac=function(i){return new(i||e)(t.Y36(Tt),t.Y36(j.ux),t.Y36(J.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-list-page"]],decls:42,vars:2,consts:[[1,"app-page-summary"],["class","app-card bordered",4,"ngIf"],[4,"ngIf"],[1,"app-card","bordered",2,"margin-top","1rem"],["href","https://twitter.com/arisu_newsfeed","target","_blank","rel","noopener"],["routerLink","/arisu-calendar"],["href","javascript:void(0)","matTooltip","CSV\u3068\u3057\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3092\u5b9f\u884c",3,"click"],[1,"app-bottom-navigation"],["routerLink","/"],[1,"app-card","bordered"],[1,"goods-total-summary"],[1,"goods-payment-report"],["mat-icon-button","","matTooltip","\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u9805\u76ee\u306b\u3064\u3044\u3066\u3001\u5e74\u6708\u3054\u3068\u306e\u652f\u6255\u3044\u984d\u3092\u8868\u793a",3,"click"],[1,"goods-cards"],[4,"ngFor","ngForOf"],["class","divider",4,"ngIf"],["mat-stroked-button","","color","primary",2,"margin","2rem 0 1rem 0",3,"matTooltip","disabled","click"],["mat-icon-button","","matTooltip","\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u9805\u76ee\u306e\u7dcf\u984d\u3092\u8868\u793a",3,"click"],["class","goods-total-price",3,"matTooltip",4,"ngIf"],[1,"goods-total-price",3,"matTooltip"],["class","goods-card",3,"item","itemChange",4,"ngIf"],[1,"goods-card",3,"item","itemChange"],[1,"divider"],[2,"vertical-align","middle"],[1,"goods-cards","archived-goods-cards"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"\u3042\u308a\u3059\u30b0\u30c3\u30ba\u30ea\u30b9\u30c8 (\u03b1 ver.)"),t.qZA()(),t.YNc(3,ue,3,0,"div",1),t.YNc(4,Ae,15,9,"ng-container",2),t.TgZ(5,"div",3)(6,"p")(7,"small"),t._uU(8," \u203b \u901f\u5831\u6027\u30fb\u6b63\u78ba\u6027\u30fb\u7db2\u7f85\u6027\u306a\u3069\u306f\u4fdd\u8a3c\u3067\u304d\u307e\u305b\u3093\u3002"),t._UZ(9,"br"),t._uU(10," \u307e\u305f\u3001\u4e88\u544a\u306a\u304f\u3001\u66f4\u65b0\u3092\u4f11\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u81ea\u5df1\u8cac\u4efb\u3067\u3054\u5229\u7528\u4e0b\u3055\u3044\u3002"),t._UZ(11,"br")(12,"br"),t._uU(13," \u203b \u672c\u30ea\u30b9\u30c8\u306f\u3001\u30b0\u30c3\u30ba\u60c5\u5831\u3092\u624b\u52d5\u3067\u6574\u7406\u30fb\u767b\u9332\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u767b\u9332\u307e\u3067\u306b\u6570\u65e5\u8981\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002"),t._UZ(14,"br"),t._uU(15," \u6700\u65b0\u306e\u60c5\u5831\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u306b\u306f\u3001\u4ee3\u308f\u308a\u306b\u3001"),t.TgZ(16,"a",4),t._uU(17,"\u30cb\u30e5\u30fc\u30b9\u30fb\u30bf\u30c1\u30d0\u30ca"),t.qZA(),t._uU(18," \u3084\u3001"),t.TgZ(19,"a",5),t._uU(20,"\u3042\u308a\u3059\u30ab\u30ec\u30f3\u30c0\u30fc"),t.qZA(),t._uU(21," \u3092\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002"),t._UZ(22,"br")(23,"br"),t._uU(24," \u203b \u672c\u30ea\u30b9\u30c8\u306f\u3001 "),t.TgZ(25,"a",6),t.NdJ("click",function(){return o.exportAsCsv()}),t._uU(26," CSV\u3068\u3057\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8"),t.qZA(),t._uU(27," \u3059\u308b\u3053\u3068\u3067\u3001Excel \u306a\u3069\u3067\u306e\u96c6\u8a08\u306b\u3082\u304a\u4f7f\u3044\u3044\u305f\u3060\u3051\u307e\u3059\u3002"),t._UZ(28,"br")(29,"br"),t._uU(30," \u203b \u5909\u66f4\u3057\u305f\u5185\u5bb9\u306f\u3001\u7aef\u672b\u5185\u306e\u307f\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002"),t._UZ(31,"br"),t._uU(32,"\u30d6\u30e9\u30a6\u30b6\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u6d88\u53bb\u306a\u3069\u3067\u6d88\u3048\u308b\u3053\u3068\u3082\u3042\u308b\u70ba\u3001\u304a\u307e\u3051\u7a0b\u5ea6\u306b\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002"),t._UZ(33,"br"),t._uU(34," \u306a\u304a\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u6a5f\u80fd\u306f\u3001\u73fe\u5728\u691c\u8a0e\u4e2d\u3067\u3059\u3002"),t._UZ(35,"br")(36,"br"),t.qZA()()(),t.TgZ(37,"div",7)(38,"a",8)(39,"mat-icon"),t._uU(40,"navigate_before"),t.qZA(),t._uU(41," \xa0 \u30db\u30fc\u30e0\u3078"),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("ngIf",void 0===o.items),t.xp6(1),t.Q6J("ngIf",void 0!==o.items))},dependencies:[$.sg,$.O5,xt.rH,ut.lW,ut.RK,Ot.Hw,ht.gM,se,$.H9],styles:[".wbr[_ngcontent-%COMP%]{word-break:keep-all;overflow-wrap:anywhere}h3[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.75rem}h4[_ngcontent-%COMP%]{font-size:.9rem;margin:0}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]{word-wrap:break-word;color:#4d75c2;transition:all .2s ease-in-out}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]:hover{opacity:.7}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]   .app-card[_ngcontent-%COMP%]{color:#333}.app-card[_ngcontent-%COMP%]{box-sizing:border-box;width:90vw;max-width:800px;padding:1.2rem 0;position:relative;background-color:#fff;border-radius:10px}.app-card.bordered[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;box-shadow:0 2px 4px #0003}.app-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.85rem;padding-left:2rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin:.5rem 0 .8rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:inline-block;margin-top:.2rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:square}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.25rem 0 .5rem}.app-page-summary[_ngcontent-%COMP%]{width:80vw;text-align:center}.app-page-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#555;font-size:1.5rem;font-weight:lighter;margin:0}.app-bottom-navigation[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;font-size:.8rem;text-decoration:none;margin-left:-1.5rem}.app-bottom-navigation[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#bddbfd;margin-bottom:0;vertical-align:middle}","[_nghost-%COMP%]{padding:1.5rem 1rem 3rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem}.app-card[_ngcontent-%COMP%]{padding:1rem 1rem .75rem}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:80vw;max-width:800px}.goods-total-summary[_ngcontent-%COMP%]{background-color:#fffd;border-radius:3rem;box-shadow:inset 0 0 0 1px #0000001a;padding:1rem 1.5rem 1rem 3rem;position:fixed;left:-2rem;bottom:1rem;z-index:10}.goods-total-summary[_ngcontent-%COMP%]   .goods-total-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#555;vertical-align:middle;margin-left:.25rem}.goods-payment-report[_ngcontent-%COMP%]{background-color:#fffd;border-radius:3rem;box-shadow:inset 0 0 0 1px #0000001a;padding:1rem 3rem 1rem 1.5rem;position:fixed;right:-2rem;bottom:1rem;z-index:10}.goods-cards[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;align-items:center;gap:2rem;width:80vw}.goods-cards[_ngcontent-%COMP%]   .goods-card[_ngcontent-%COMP%]{width:90vw;max-width:800px}small[_ngcontent-%COMP%]{font-size:.8rem}.divider[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#0002;margin:2rem 0}@media screen and (max-width: 768px){[_nghost-%COMP%]{padding-left:0;padding-right:0}.goods-cards[_ngcontent-%COMP%]{padding-left:0;padding-right:0;width:100vw}.goods-cards[_ngcontent-%COMP%]   .goods-card[_ngcontent-%COMP%]{width:95vw}.goods-total-summary[_ngcontent-%COMP%]{padding-left:2.25rem;padding-right:.75rem;bottom:2.5rem}.goods-payment-report[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:2.25rem;bottom:2.5rem}}"]}),s})(),title:"\u3042\u308a\u3059\u30b0\u30c3\u30ba\u30ea\u30b9\u30c8"}];let Pe=(()=>{var e;class s{}return(e=s).\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[xt.Bz.forChild(Te),xt.Bz]}),s})();var Oe=v(7904);let ve=(()=>{var e;class s{}return(e=s).\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[$.ez,Pe,Oe.m]}),s})()},4316:function(Zt,Mt){var v,xt;v=function z(){"use strict";var t=typeof self<"u"?self:typeof window<"u"?window:void 0!==t?t:{},J=!t.document&&!!t.postMessage,ut=t.IS_PAPA_WORKER||!1,yt={},rt=0,C={parse:function(r,a){var c=(a=a||{}).dynamicTyping||!1;if(M(c)&&(a.dynamicTypingFunction=c,c={}),a.dynamicTyping=c,a.transform=!!M(a.transform)&&a.transform,a.worker&&C.WORKERS_SUPPORTED){var _=function(){if(!C.WORKERS_SUPPORTED)return!1;var G,w,E=(G=t.URL||t.webkitURL||null,w=z.toString(),C.BLOB_URL||(C.BLOB_URL=G.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",w,")();"],{type:"text/javascript"})))),A=new t.Worker(E);return A.onmessage=Bt,A.id=rt++,yt[A.id]=A}();return _.userStep=a.step,_.userChunk=a.chunk,_.userComplete=a.complete,_.userError=a.error,a.step=M(a.step),a.chunk=M(a.chunk),a.complete=M(a.complete),a.error=M(a.error),delete a.worker,void _.postMessage({input:r,config:a,workerId:_.id})}var E,p=null;return"string"==typeof r?(r=65279===(E=r).charCodeAt(0)?E.slice(1):E,p=a.download?new T(a):new At(a)):!0===r.readable&&M(r.read)&&M(r.on)?p=new Tt(a):(t.File&&r instanceof File||r instanceof Object)&&(p=new Pt(a)),p.stream(r)},unparse:function(r,a){var c=!1,_=!0,p=",",E="\r\n",A='"',G=A+A,w=!1,g=null,R=!1;!function(){if("object"==typeof a){if("string"!=typeof a.delimiter||C.BAD_DELIMITERS.filter(function(m){return-1!==a.delimiter.indexOf(m)}).length||(p=a.delimiter),("boolean"==typeof a.quotes||"function"==typeof a.quotes||Array.isArray(a.quotes))&&(c=a.quotes),"boolean"!=typeof a.skipEmptyLines&&"string"!=typeof a.skipEmptyLines||(w=a.skipEmptyLines),"string"==typeof a.newline&&(E=a.newline),"string"==typeof a.quoteChar&&(A=a.quoteChar),"boolean"==typeof a.header&&(_=a.header),Array.isArray(a.columns)){if(0===a.columns.length)throw new Error("Option columns is empty");g=a.columns}void 0!==a.escapeChar&&(G=a.escapeChar+A),("boolean"==typeof a.escapeFormulae||a.escapeFormulae instanceof RegExp)&&(R=a.escapeFormulae instanceof RegExp?a.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var x=new RegExp(V(A),"g");if("string"==typeof r&&(r=JSON.parse(r)),Array.isArray(r)){if(!r.length||Array.isArray(r[0]))return ot(null,r,w);if("object"==typeof r[0])return ot(g||Object.keys(r[0]),r,w)}else if("object"==typeof r)return"string"==typeof r.data&&(r.data=JSON.parse(r.data)),Array.isArray(r.data)&&(r.fields||(r.fields=r.meta&&r.meta.fields||g),r.fields||(r.fields=Array.isArray(r.data[0])?r.fields:"object"==typeof r.data[0]?Object.keys(r.data[0]):[]),Array.isArray(r.data[0])||"object"==typeof r.data[0]||(r.data=[r.data])),ot(r.fields||[],r.data||[],w);throw new Error("Unable to serialize unrecognized input");function ot(m,k,W){var Z="";"string"==typeof m&&(m=JSON.parse(m)),"string"==typeof k&&(k=JSON.parse(k));var U=Array.isArray(m)&&0<m.length,Y=!Array.isArray(k[0]);if(U&&_){for(var Q=0;Q<m.length;Q++)0<Q&&(Z+=p),Z+=q(m[Q],Q);0<k.length&&(Z+=E)}for(var f=0;f<k.length;f++){var P=U?m.length:k[f].length,S=!1,I=U?0===Object.keys(k[f]).length:0===k[f].length;if(W&&!U&&(S="greedy"===W?""===k[f].join("").trim():1===k[f].length&&0===k[f][0].length),"greedy"===W&&U){for(var F=[],j=0;j<P;j++)F.push(k[f][Y?m[j]:j]);S=""===F.join("").trim()}if(!S){for(var b=0;b<P;b++)0<b&&!I&&(Z+=p),Z+=q(k[f][U&&Y?m[b]:b],b);f<k.length-1&&(!W||0<P&&!I)&&(Z+=E)}}return Z}function q(m,k){if(null==m)return"";if(m.constructor===Date)return JSON.stringify(m).slice(1,25);var W=!1;R&&"string"==typeof m&&R.test(m)&&(m="'"+m,W=!0);var Z=m.toString().replace(x,G);return(W=W||!0===c||"function"==typeof c&&c(m,k)||Array.isArray(c)&&c[k]||function(U,Y){for(var Q=0;Q<Y.length;Q++)if(-1<U.indexOf(Y[Q]))return!0;return!1}(Z,C.BAD_DELIMITERS)||-1<Z.indexOf(p)||" "===Z.charAt(0)||" "===Z.charAt(Z.length-1))?A+Z+A:Z}}};if(C.RECORD_SEP=String.fromCharCode(30),C.UNIT_SEP=String.fromCharCode(31),C.BYTE_ORDER_MARK="\ufeff",C.BAD_DELIMITERS=["\r","\n",'"',C.BYTE_ORDER_MARK],C.WORKERS_SUPPORTED=!J&&!!t.Worker,C.NODE_STREAM_INPUT=1,C.LocalChunkSize=10485760,C.RemoteChunkSize=5242880,C.DefaultDelimiter=",",C.Parser=ht,C.ParserHandle=Ot,C.NetworkStreamer=T,C.FileStreamer=Pt,C.StringStreamer=At,C.ReadableStreamStreamer=Tt,t.jQuery){var Et=t.jQuery;Et.fn.parse=function(r){var a=r.config||{},c=[];return this.each(function(E){if("INPUT"!==Et(this).prop("tagName").toUpperCase()||"file"!==Et(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var A=0;A<this.files.length;A++)c.push({file:this.files[A],inputElem:this,instanceConfig:Et.extend({},a)})}),_(),this;function _(){if(0!==c.length){var A,G,w,g=c[0];if(M(r.before)){var R=r.before(g.file,g.inputElem);if("object"==typeof R){if("abort"===R.action)return"AbortError",A=g.file,G=g.inputElem,w=R.reason,void(M(r.error)&&r.error({name:"AbortError"},A,G,w));if("skip"===R.action)return void p();"object"==typeof R.config&&(g.instanceConfig=Et.extend(g.instanceConfig,R.config))}else if("skip"===R)return void p()}var x=g.instanceConfig.complete;g.instanceConfig.complete=function(ot){M(x)&&x(ot,g.file,g.inputElem),p()},C.parse(g.file,g.instanceConfig)}else M(r.complete)&&r.complete()}function p(){c.splice(0,1),_()}}}function ct(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(a){var c=Dt(a);c.chunkSize=parseInt(c.chunkSize),a.step||a.chunk||(c.chunkSize=null),this._handle=new Ot(c),(this._handle.streamer=this)._config=c}.call(this,r),this.parseChunk=function(a,c){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var _=this._config.beforeFirstChunk(a);void 0!==_&&(a=_)}this.isFirstChunk=!1,this._halted=!1;var p=this._partialLine+a;this._partialLine="";var E=this._handle.parse(p,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var A=E.meta.cursor;this._finished||(this._partialLine=p.substring(A-this._baseIndex),this._baseIndex=A),E&&E.data&&(this._rowCount+=E.data.length);var G=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(ut)t.postMessage({results:E,workerId:C.WORKER_ID,finished:G});else if(M(this._config.chunk)&&!c){if(this._config.chunk(E,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);E=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(E.data),this._completeResults.errors=this._completeResults.errors.concat(E.errors),this._completeResults.meta=E.meta),this._completed||!G||!M(this._config.complete)||E&&E.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),G||E&&E.meta.paused||this._nextChunk(),E}this._halted=!0},this._sendError=function(a){M(this._config.error)?this._config.error(a):ut&&this._config.error&&t.postMessage({workerId:C.WORKER_ID,error:a,finished:!1})}}function T(r){var a;(r=r||{}).chunkSize||(r.chunkSize=C.RemoteChunkSize),ct.call(this,r),this._nextChunk=J?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(c){this._input=c,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),J||(a.onload=_t(this._chunkLoaded,this),a.onerror=_t(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!J),this._config.downloadRequestHeaders){var c=this._config.downloadRequestHeaders;for(var _ in c)a.setRequestHeader(_,c[_])}this._config.chunkSize&&a.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{a.send(this._config.downloadRequestBody)}catch(E){this._chunkError(E.message)}J&&0===a.status&&this._chunkError()}},this._chunkLoaded=function(){var _;4===a.readyState&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(_=a.getResponseHeader("Content-Range"))?-1:parseInt(_.substring(_.lastIndexOf("/")+1))),this.parseChunk(a.responseText)))},this._chunkError=function(c){this._sendError(new Error(a.statusText||c))}}function Pt(r){var a,c;(r=r||{}).chunkSize||(r.chunkSize=C.LocalChunkSize),ct.call(this,r);var _=typeof FileReader<"u";this.stream=function(p){this._input=p,c=p.slice||p.webkitSlice||p.mozSlice,_?((a=new FileReader).onload=_t(this._chunkLoaded,this),a.onerror=_t(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var p=this._input;if(this._config.chunkSize){var E=Math.min(this._start+this._config.chunkSize,this._input.size);p=c.call(p,this._start,E)}var A=a.readAsText(p,this._config.encoding);_||this._chunkLoaded({target:{result:A}})},this._chunkLoaded=function(p){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(p.target.result)},this._chunkError=function(){this._sendError(a.error)}}function At(r){var a;ct.call(this,r=r||{}),this.stream=function(c){return a=c,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var c,_=this._config.chunkSize;return _?(c=a.substring(0,_),a=a.substring(_)):(c=a,a=""),this._finished=!a,this.parseChunk(c)}}}function Tt(r){ct.call(this,r=r||{});var a=[],c=!0,_=!1;this.pause=function(){ct.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){ct.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(p){this._input=p,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_&&1===a.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):c=!0},this._streamData=_t(function(p){try{a.push("string"==typeof p?p:p.toString(this._config.encoding)),c&&(c=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(E){this._streamError(E)}},this),this._streamError=_t(function(p){this._streamCleanUp(),this._sendError(p)},this),this._streamEnd=_t(function(){this._streamCleanUp(),_=!0,this._streamData("")},this),this._streamCleanUp=_t(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Ot(r){var a,c,_,p=Math.pow(2,53),E=-p,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,G=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,w=this,g=0,R=0,x=!1,ot=!1,q=[],m={data:[],errors:[],meta:{}};if(M(r.step)){var k=r.step;r.step=function(f){if(m=f,U())Z();else{if(Z(),0===m.data.length)return;g+=f.data.length,r.preview&&g>r.preview?c.abort():(m.data=m.data[0],k(m,w))}}}function W(f){return"greedy"===r.skipEmptyLines?""===f.join("").trim():1===f.length&&0===f[0].length}function Z(){return m&&_&&(Q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+C.DefaultDelimiter+"'"),_=!1),r.skipEmptyLines&&(m.data=m.data.filter(function(f){return!W(f)})),U()&&function(){if(m)if(Array.isArray(m.data[0])){for(var P=0;U()&&P<m.data.length;P++)m.data[P].forEach(f);m.data.splice(0,1)}else m.data.forEach(f);function f(S,I){M(r.transformHeader)&&(S=r.transformHeader(S,I)),q.push(S)}}(),function(){if(!m||!r.header&&!r.dynamicTyping&&!r.transform)return m;function f(S,I){var F,j=r.header?{}:[];for(F=0;F<S.length;F++){var L=F,b=S[F];r.header&&(L=F>=q.length?"__parsed_extra":q[F]),r.transform&&(b=r.transform(b,L)),b=Y(L,b),"__parsed_extra"===L?(j[L]=j[L]||[],j[L].push(b)):j[L]=b}return r.header&&(F>q.length?Q("FieldMismatch","TooManyFields","Too many fields: expected "+q.length+" fields but parsed "+F,R+I):F<q.length&&Q("FieldMismatch","TooFewFields","Too few fields: expected "+q.length+" fields but parsed "+F,R+I)),j}var P=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(f),P=m.data.length):m.data=f(m.data,0),r.header&&m.meta&&(m.meta.fields=q),R+=P,m}()}function U(){return r.header&&0===q.length}function Y(f,P){return S=f,r.dynamicTypingFunction&&void 0===r.dynamicTyping[S]&&(r.dynamicTyping[S]=r.dynamicTypingFunction(S)),!0===(r.dynamicTyping[S]||r.dynamicTyping)?"true"===P||"TRUE"===P||"false"!==P&&"FALSE"!==P&&(function(I){if(A.test(I)){var F=parseFloat(I);if(E<F&&F<p)return!0}return!1}(P)?parseFloat(P):G.test(P)?new Date(P):""===P?null:P):P;var S}function Q(f,P,S,I){var F={type:f,code:P,message:S};void 0!==I&&(F.row=I),m.errors.push(F)}this.parse=function(f,P,S){if(r.newline||(r.newline=function(L,b){L=L.substring(0,1048576);var at=new RegExp(V(b)+"([^]*?)"+V(b),"gm"),X=(L=L.replace(at,"")).split("\r"),st=L.split("\n");if(1===X.length||1<st.length&&st[0].length<X[0].length)return"\n";for(var tt=0,B=0;B<X.length;B++)"\n"===X[B][0]&&tt++;return tt>=X.length/2?"\r\n":"\r"}(f,r.quoteChar||'"')),_=!1,r.delimiter)M(r.delimiter)&&(r.delimiter=r.delimiter(f),m.meta.delimiter=r.delimiter);else{var F=function(L,b,at,X,st){var lt,tt,B,N;st=st||[",","\t","|",";",C.RECORD_SEP,C.UNIT_SEP];for(var et=0;et<st.length;et++){var O=st[et],Ct=0,dt=0,ft=0;B=void 0;for(var mt=new ht({comments:X,delimiter:O,newline:b,preview:10}).parse(L),pt=0;pt<mt.data.length;pt++)if(at&&W(mt.data[pt]))ft++;else{var gt=mt.data[pt].length;dt+=gt,void 0!==B?0<gt&&(Ct+=Math.abs(gt-B),B=gt):B=gt}0<mt.data.length&&(dt/=mt.data.length-ft),(void 0===tt||Ct<=tt)&&(void 0===N||N<dt)&&1.99<dt&&(tt=Ct,lt=O,N=dt)}return{successful:!!(r.delimiter=lt),bestDelimiter:lt}}(f,r.newline,r.skipEmptyLines,r.comments,r.delimitersToGuess);F.successful?r.delimiter=F.bestDelimiter:(_=!0,r.delimiter=C.DefaultDelimiter),m.meta.delimiter=r.delimiter}var j=Dt(r);return r.preview&&r.header&&j.preview++,a=f,c=new ht(j),m=c.parse(a,P,S),Z(),x?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return x},this.pause=function(){x=!0,c.abort(),a=M(r.chunk)?"":a.substring(c.getCharIndex())},this.resume=function(){w.streamer._halted?(x=!1,w.streamer.parseChunk(a,!0)):setTimeout(w.resume,3)},this.aborted=function(){return ot},this.abort=function(){ot=!0,c.abort(),m.meta.aborted=!0,M(r.complete)&&r.complete(m),a=""}}function V(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ht(r){var a,c=(r=r||{}).delimiter,_=r.newline,p=r.comments,E=r.step,A=r.preview,G=r.fastMode,w=a=null==r.quoteChar?'"':r.quoteChar;if(void 0!==r.escapeChar&&(w=r.escapeChar),("string"!=typeof c||-1<C.BAD_DELIMITERS.indexOf(c))&&(c=","),p===c)throw new Error("Comment character same as delimiter");!0===p?p="#":("string"!=typeof p||-1<C.BAD_DELIMITERS.indexOf(p))&&(p=!1),"\n"!==_&&"\r"!==_&&"\r\n"!==_&&(_="\n");var g=0,R=!1;this.parse=function(x,ot,q){if("string"!=typeof x)throw new Error("Input must be a string");var m=x.length,k=c.length,W=_.length,Z=p.length,U=M(E),Y=[],Q=[],f=[],P=g=0;if(!x)return nt();if(r.header&&!ot){var S=x.split(_)[0].split(c),I=[],F={},j=!1;for(var L in S){var b=S[L];M(r.transformHeader)&&(b=r.transformHeader(b,L));var at=b,X=F[b]||0;for(0<X&&(j=!0,at=b+"_"+X),F[b]=X+1;I.includes(at);)at=at+"_"+X;I.push(at)}if(j){var st=x.split(_);st[0]=I.join(c),x=st.join(_)}}if(G||!1!==G&&-1===x.indexOf(a)){for(var lt=x.split(_),tt=0;tt<lt.length;tt++){if(g+=(f=lt[tt]).length,tt!==lt.length-1)g+=_.length;else if(q)return nt();if(!p||f.substring(0,Z)!==p){if(U){if(Y=[],ft(f.split(c)),vt(),R)return nt()}else ft(f.split(c));if(A&&A<=tt)return Y=Y.slice(0,A),nt(!0)}}return nt()}for(var B=x.indexOf(c,g),N=x.indexOf(_,g),et=new RegExp(V(w)+V(a),"g"),O=x.indexOf(a,g);;)if(x[g]!==a)if(p&&0===f.length&&x.substring(g,g+Z)===p){if(-1===N)return nt();N=x.indexOf(_,g=N+W),B=x.indexOf(c,g)}else if(-1!==B&&(B<N||-1===N))f.push(x.substring(g,B)),B=x.indexOf(c,g=B+k);else{if(-1===N)break;if(f.push(x.substring(g,N)),gt(N+W),U&&(vt(),R))return nt();if(A&&Y.length>=A)return nt(!0)}else for(O=g,g++;;){if(-1===(O=x.indexOf(a,O+1)))return q||Q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Y.length,index:g}),pt();if(O===m-1)return pt(x.substring(g,O).replace(et,a));if(a!==w||x[O+1]!==w){if(a===w||0===O||x[O-1]!==w){-1!==B&&B<O+1&&(B=x.indexOf(c,O+1)),-1!==N&&N<O+1&&(N=x.indexOf(_,O+1));var Ct=mt(-1===N?B:Math.min(B,N));if(x.substr(O+1+Ct,k)===c){f.push(x.substring(g,O).replace(et,a)),x[g=O+1+Ct+k]!==a&&(O=x.indexOf(a,g)),B=x.indexOf(c,g),N=x.indexOf(_,g);break}var dt=mt(N);if(x.substring(O+1+dt,O+1+dt+W)===_){if(f.push(x.substring(g,O).replace(et,a)),gt(O+1+dt+W),B=x.indexOf(c,g),O=x.indexOf(a,g),U&&(vt(),R))return nt();if(A&&Y.length>=A)return nt(!0);break}Q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Y.length,index:g}),O++}}else O++}return pt();function ft(it){Y.push(it),P=g}function mt(it){var St=0;if(-1!==it){var bt=x.substring(O+1,it);bt&&""===bt.trim()&&(St=bt.length)}return St}function pt(it){return q||(void 0===it&&(it=x.substring(g)),f.push(it),g=m,ft(f),U&&vt()),nt()}function gt(it){g=it,ft(f),f=[],N=x.indexOf(_,g)}function nt(it){return{data:Y,errors:Q,meta:{delimiter:c,linebreak:_,aborted:R,truncated:!!it,cursor:P+(ot||0)}}}function vt(){E(nt()),Y=[],Q=[]}},this.abort=function(){R=!0},this.getCharIndex=function(){return g}}function Bt(r){var a=r.data,c=yt[a.workerId],_=!1;if(a.error)c.userError(a.error,a.file);else if(a.results&&a.results.data){var p={abort:function(){_=!0,Ft(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:kt,resume:kt};if(M(c.userStep)){for(var E=0;E<a.results.data.length&&(c.userStep({data:a.results.data[E],errors:a.results.errors,meta:a.results.meta},p),!_);E++);delete a.results}else M(c.userChunk)&&(c.userChunk(a.results,p,a.file),delete a.results)}a.finished&&!_&&Ft(a.workerId,a.results)}function Ft(r,a){var c=yt[r];M(c.userComplete)&&c.userComplete(a),c.terminate(),delete yt[r]}function kt(){throw new Error("Not implemented.")}function Dt(r){if("object"!=typeof r||null===r)return r;var a=Array.isArray(r)?[]:{};for(var c in r)a[c]=Dt(r[c]);return a}function _t(r,a){return function(){r.apply(a,arguments)}}function M(r){return"function"==typeof r}return ut&&(t.onmessage=function(r){var a=r.data;if(void 0===C.WORKER_ID&&a&&(C.WORKER_ID=a.workerId),"string"==typeof a.input)t.postMessage({workerId:C.WORKER_ID,results:C.parse(a.input,a.config),finished:!0});else if(t.File&&a.input instanceof File||a.input instanceof Object){var c=C.parse(a.input,a.config);c&&t.postMessage({workerId:C.WORKER_ID,results:c,finished:!0})}}),(T.prototype=Object.create(ct.prototype)).constructor=T,(Pt.prototype=Object.create(ct.prototype)).constructor=Pt,(At.prototype=Object.create(At.prototype)).constructor=At,(Tt.prototype=Object.create(ct.prototype)).constructor=Tt,C},void 0!==(xt=v.apply(Mt,[]))&&(Zt.exports=xt)}}]);