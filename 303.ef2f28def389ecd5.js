"use strict";(self.webpackChunkarisucool=self.webpackChunkarisucool||[]).push([[303],{2303:(ft,h,r)=>{r.r(h),r.d(h,{GoodsListModule:()=>pt});var _=r(6895),f=r(8996),l=r(5861),t=r(4650),P=r(6707),T=r(2340),c=(()=>{return(n=c||(c={}))[n.BEFORE_RESERVATION=0]="BEFORE_RESERVATION",n[n.RESERVATION=1]="RESERVATION",n[n.END_OF_RESERVATION=2]="END_OF_RESERVATION",n[n.BEFORE_SALE=3]="BEFORE_SALE",n[n.ON_SALE=4]="ON_SALE",n[n.END_OF_SALE=5]="END_OF_SALE",n[n.UNKNOWN=6]="UNKNOWN",c;var n})(),v=r(1761);let B=(()=>{class n{constructor(e){this.appCacheService=e,this.GOODS_LIST_STORAGE_VERSION=1}init(){var e=this;return(0,l.Z)(function*(){e.storage||(e.storage=yield(0,P.H)({name:"arisucoolGoodsListItemStatus",version:e.GOODS_LIST_STORAGE_VERSION}))})()}getGoodsList(){var e=this;return(0,l.Z)(function*(){yield e.init();const o=yield e.appCacheService.getCachedJson("arisuGoodsList",n.GOODS_LIST_JSON_CACHE_EXPIRES);if(o)return yield e.injectStatuses(o);const i=yield fetch(T.N.SHOPPING_LIST_JSON_API_URL);if(!i.ok)throw new Error("Failed to fetch goods list");const u=yield i.json();return e.appCacheService.setCachedJson("arisuGoodsList",u),yield e.injectStatuses(u)})()}getTotalPriceByGoodsList(e,o=!1){let i=0,u=0;for(const s of e)if(o||!s.isArchived)if(s.children){let d=this.getTotalPriceByGoodsList(s.children,o);i+=d.minPrice,u+=d.maxPrice}else{if(!s.isChecked)continue;i+=s.priceWithTax??0,u+=s.boxPriceWithTax??s.priceWithTax??0}return{minPrice:i,maxPrice:u}}isItemEndOfSale(e){if(!e.endOfSaleDate&&!e.confirmedEndOfSaleDate)return!1;const o=new Date,i=e.endOfSaleDate?new Date(e.endOfSaleDate):void 0,u=e.confirmedEndOfSaleDate?new Date(e.confirmedEndOfSaleDate):void 0;return!!(i&&i<o||u&&u<o)}setItemStatus(e,o,i){var u=this;return(0,l.Z)(function*(){if(yield u.init(),!u.storage)throw new Error("Failed to init storage");u.storage.set(e.toString(),{note:void 0,isChecked:o,isArchived:i})})()}getItemSalesStatus(e){let o=this.isItemEndOfSale(e),i=c.UNKNOWN;if(o)i=c.END_OF_SALE;else{const u=new Date,s=e.reservationStartDate;s&&(i=new Date(s)>u?c.BEFORE_RESERVATION:c.RESERVATION);const d=e.reservationEndDate;d&&new Date(d)<u&&(i=c.END_OF_RESERVATION);const p=e.saleDate;p&&(i=new Date(p)>u?c.BEFORE_SALE:c.ON_SALE);const O=e.endOfSaleDate;O&&new Date(O)<u&&(i=c.END_OF_SALE)}return i}injectStatuses(e){var o=this;return(0,l.Z)(function*(){let i=[];for(const u of e)!u||isNaN(u.id)||(u.children&&(u.children=yield o.injectStatuses(u.children)),i.push({...u,salesStatus:o.getItemSalesStatus(u),isChecked:!1,isArchived:!1}));for(const u of i){const s=yield o.storage?.get(u.id.toString());u.isChecked=!!s&&s.isChecked,u.isArchived=!!s&&s.isArchived}return i=i.sort((u,s)=>void 0===u.reservationStartDate?1:void 0===s.reservationStartDate?-1:new Date(s.reservationStartDate).getTime()-new Date(u.reservationStartDate).getTime()),i=i.sort((u,s)=>void 0===u.saleDate||void 0===s.saleDate?0:new Date(s.saleDate).getTime()-new Date(u.saleDate).getTime()),i})()}static getValueByMatchedKey(e,o){const i=o.toLowerCase(),u=Object.keys(e);for(const s of u)if(0===s.toLowerCase().indexOf(i)){let d=e[s];return void 0===d||""===d.trim()||"-"===d?void 0:e[s]}}}return n.GOODS_LIST_JSON_CACHE_EXPIRES=18e5,n.\u0275fac=function(e){return new(e||n)(t.LFG(v.g))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=r(7009),m=r(4859),A=r(3336),x=r(266),g=r(3546),D=r(6709),E=r(4006);function F(n,a){if(1&n&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.reservationStartDate,"yyyy/MM/dd")," \u304b\u3089 ")}}function M(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"span",12),t._uU(2," \u4e88\u7d04\u958b\u59cb\u524d "),t.qZA(),t.YNc(3,F,3,4,"span",13),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.item.reservationStartDate)}}function y(n,a){if(1&n&&(t.TgZ(0,"span",17),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,e.item.reservationEndDate,"yyyy/MM/dd")," \u307e\u3067 ")}}function w(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"span",15),t._uU(2," \u4e88\u7d04\u53d7\u4ed8\u4e2d "),t.qZA(),t.YNc(3,y,3,4,"span",16),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.item.reservationEndDate)}}function Z(n,a){1&n&&(t.ynx(0),t.TgZ(1,"span",18),t._uU(2," \u4e88\u7d04\u7d42\u4e86 "),t.qZA(),t.BQk())}function L(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"span",19),t._uU(2," \u767a\u58f2\u524d "),t.qZA(),t.TgZ(3,"span",20),t._uU(4),t.ALo(5,"date"),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(4),t.hij(" ",t.xi3(5,1,e.item.saleDate,"yyyy/MM/dd")," \u304b\u3089 ")}}function b(n,a){1&n&&(t.ynx(0),t.TgZ(1,"span",21),t._uU(2," \u8ca9\u58f2\u4e2d "),t.qZA(),t.BQk())}function k(n,a){1&n&&(t.ynx(0),t.TgZ(1,"span",22),t._uU(2," \u7d42\u58f2 "),t.qZA(),t.BQk())}function N(n,a){1&n&&(t.ynx(0),t.TgZ(1,"span",23),t._uU(2," \u4e0d\u660e "),t.qZA(),t.BQk())}function I(n,a){if(1&n&&(t.TgZ(0,"span",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" \uffe5",t.lcZ(2,1,e.priceWithTax)," ")}}function G(n,a){if(1&n&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" \u301c ",t.lcZ(2,1,e.boxPriceWithTax)," ")}}function J(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-checkbox",25),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).$implicit;return t.KtG(s.isChecked=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.itemChange.emit(i.item))}),t._uU(2),t.YNc(3,I,3,3,"span",26),t.YNc(4,G,3,3,"span",27),t.qZA(),t.BQk()}if(2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngModel",e.isChecked),t.xp6(1),t.hij(" ",e.name," \xa0\xa0 "),t.xp6(1),t.Q6J("ngIf",e.priceWithTax),t.xp6(1),t.Q6J("ngIf",e.boxPriceWithTax)}}function Q(n,a){if(1&n&&(t.ynx(0),t.YNc(1,J,5,4,"ng-container",24),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.item.children)}}function U(n,a){if(1&n&&(t.TgZ(0,"span",28),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" \uffe5",t.lcZ(2,1,e.item.priceWithTax)," ")}}function R(n,a){if(1&n&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" \u301c ",t.lcZ(2,1,e.item.boxPriceWithTax)," ")}}function Y(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-checkbox",25),t.NdJ("ngModelChange",function(i){t.CHM(e);const u=t.oxw();return t.KtG(u.item.isChecked=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.itemChange.emit(i.item))}),t._uU(2),t.YNc(3,U,3,3,"span",26),t.YNc(4,R,3,3,"span",27),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.item.isChecked),t.xp6(1),t.hij(" ",e.item.name," \xa0\xa0 "),t.xp6(1),t.Q6J("ngIf",e.item.priceWithTax),t.xp6(1),t.Q6J("ngIf",e.item.boxPriceWithTax)}}function q(n,a){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"check_box"),t.qZA())}function j(n,a){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"check_box_outline_blank"),t.qZA())}function H(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.item.isArchived=!0,t.KtG(i.itemChange.emit(i.item))}),t.TgZ(1,"mat-icon"),t._uU(2,"archive"),t.qZA()()}}function K(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.item.isArchived=!1,t.KtG(i.itemChange.emit(i.item))}),t.TgZ(1,"mat-icon"),t._uU(2,"unarchive"),t.qZA()()}}const V=function(n,a,e,o,i,u,s){return{"sales-before-reservation":n,"sales-reservation":a,"sales-end-of-reservation":e,"sales-before-sale":o,"sales-on-sale":i,"sales-end-of-sale":u,"sales-unknown":s}};let W=(()=>{class n{constructor(){this.itemChange=new t.vpe,this.salesStatus=c}toggleAllChecks(){const e=this.isAllChecked();if(this.item.isChecked=!e,this.item.children)for(const o of this.item.children)o.isChecked=!e}isAllChecked(){return this.item.children?this.item.children.every(e=>e.isChecked):this.item.isChecked}isPastDate(e){return new Date(e).getTime()<Date.now()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-goods-list-card"]],inputs:{item:"item"},outputs:{itemChange:"itemChange"},decls:28,vars:28,consts:[[3,"ngClass"],[1,"item-summary"],[4,"ngIf"],[1,"maker"],[1,"checklist"],[2,"display","flex","justify-content","end","gap","1rem","width","100%","padding-top","0"],["mat-icon-button","","color","primary","matTooltip","\u53c2\u8003\u30da\u30fc\u30b8\u3092\u958b\u304f","target","_blank","rel","noopener",3,"href","disabled"],[2,"margin-bottom","3px"],[2,"flex-grow","1"],["mat-icon-button","",3,"matTooltip","color","click"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u89e3\u9664\u3059\u308b",3,"click",4,"ngIf"],[1,"sales-status","before-reservation"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u958b\u59cb\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u958b\u59cb\u65e5",1,"sales-date"],[1,"sales-status","reservation"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u7de0\u5207\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u7de0\u5207\u65e5",1,"sales-date"],[1,"sales-status","end-of-reservation"],[1,"sales-status","before-sale"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u767a\u58f2\u65e5",1,"sales-date"],[1,"sales-status","on-sale"],[1,"sales-status","end-of-sale"],[1,"sales-status","unknown"],[4,"ngFor","ngForOf"],[1,"checklist-item",3,"ngModel","ngModelChange"],["class","price",4,"ngIf"],["class","price","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306fBOX\u8ca9\u58f2\u304c\u3042\u308a\u307e\u3059",4,"ngIf"],[1,"price"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306fBOX\u8ca9\u58f2\u304c\u3042\u308a\u307e\u3059",1,"price"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b",3,"click"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u89e3\u9664\u3059\u308b",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle",1),t.YNc(5,M,4,1,"ng-container",2),t.YNc(6,w,4,1,"ng-container",2),t.YNc(7,Z,3,0,"ng-container",2),t.YNc(8,L,6,4,"ng-container",2),t.YNc(9,b,3,0,"ng-container",2),t.YNc(10,k,3,0,"ng-container",2),t.YNc(11,N,3,0,"ng-container",2),t.TgZ(12,"span",3),t._uU(13),t.qZA()()(),t.TgZ(14,"mat-card-content")(15,"div",4),t.YNc(16,Q,2,1,"ng-container",2),t.YNc(17,Y,5,4,"ng-container",2),t.qZA()(),t.TgZ(18,"mat-card-actions",5)(19,"a",6)(20,"mat-icon",7),t._uU(21,"link"),t.qZA()(),t._UZ(22,"div",8),t.TgZ(23,"button",9),t.NdJ("click",function(){return o.toggleAllChecks(),o.itemChange.emit(o.item)}),t.YNc(24,q,2,0,"mat-icon",2),t.YNc(25,j,2,0,"mat-icon",2),t.qZA(),t.YNc(26,H,3,0,"button",10),t.YNc(27,K,3,0,"button",11),t.qZA()()),2&e&&(t.Q6J("ngClass",t.Hh0(20,V,o.item.salesStatus===o.salesStatus.BEFORE_RESERVATION,o.item.salesStatus===o.salesStatus.RESERVATION,o.item.salesStatus===o.salesStatus.END_OF_RESERVATION,o.item.salesStatus===o.salesStatus.BEFORE_SALE,o.item.salesStatus===o.salesStatus.ON_SALE,o.item.salesStatus===o.salesStatus.END_OF_SALE,o.item.salesStatus===o.salesStatus.UNKNOWN)),t.xp6(3),t.hij(" ",o.item.name,""),t.xp6(2),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.BEFORE_RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.END_OF_RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.BEFORE_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.ON_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.END_OF_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.UNKNOWN),t.xp6(2),t.hij(" ",o.item.maker||"-"," "),t.xp6(3),t.Q6J("ngIf",o.item.children&&o.item.children.length>=1),t.xp6(1),t.Q6J("ngIf",!o.item.children||1==o.item.children.length),t.xp6(2),t.Q6J("href",o.item.url,t.LSH)("disabled",!o.item.url),t.xp6(4),t.Q6J("matTooltip",o.isAllChecked()?"\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059":"\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u308b")("color",o.isAllChecked()?"accent":""),t.xp6(1),t.Q6J("ngIf",o.isAllChecked()),t.xp6(1),t.Q6J("ngIf",!o.isAllChecked()),t.xp6(1),t.Q6J("ngIf",!o.item.isArchived),t.xp6(1),t.Q6J("ngIf",o.item.isArchived))},dependencies:[_.mk,_.sg,_.O5,m.o6,m.RK,g.a8,g.hq,g.dn,g.dk,g.$j,g.n5,D.oG,A.Hw,x.gM,E.JJ,E.On,_.JJ,_.uU],styles:["mat-card[_ngcontent-%COMP%]{padding-left:.5rem}mat-card.sales-before-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-end-of-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #7f8c8d}mat-card.sales-before-sale[_ngcontent-%COMP%]{border-left:.5rem solid #1abc9c}mat-card.sales-on-sale[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-end-of-sale[_ngcontent-%COMP%]{border-left:.5rem solid #7f8c8d}mat-card.sales-unknown[_ngcontent-%COMP%]{border-left:.5rem solid #aaaaaa}.item-summary[_ngcontent-%COMP%]   .sales-status.before-reservation[_ngcontent-%COMP%], .item-summary[_ngcontent-%COMP%]   .sales-status.reservation[_ngcontent-%COMP%]{color:#27ae60}.item-summary[_ngcontent-%COMP%]   .sales-status.end-of-reservation[_ngcontent-%COMP%]{color:#7f8c8d}.item-summary[_ngcontent-%COMP%]   .sales-status.before-sale[_ngcontent-%COMP%]{color:#1abc9c}.item-summary[_ngcontent-%COMP%]   .sales-status.on-sale[_ngcontent-%COMP%]{color:#27ae60}.item-summary[_ngcontent-%COMP%]   .sales-status.end-of-sale[_ngcontent-%COMP%]{color:#7f8c8d}.item-summary[_ngcontent-%COMP%]   .sales-status.unknown[_ngcontent-%COMP%]{color:#aaa}.item-summary[_ngcontent-%COMP%]   .sales-date[_ngcontent-%COMP%]{margin-left:1rem;font-weight:bolder}.item-summary[_ngcontent-%COMP%]   .maker[_ngcontent-%COMP%]{margin-left:2rem}.checklist[_ngcontent-%COMP%]{display:flex;flex-direction:column}.checklist[_ngcontent-%COMP%]   .checklist-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:.8rem}@media screen and (max-width: 768px){.maker[_ngcontent-%COMP%]{display:none}mat-card-content[_ngcontent-%COMP%]{padding-top:.25rem;padding-left:0}}"]}),n})();function z(n,a){1&n&&(t.TgZ(0,"div",8)(1,"p"),t._uU(2,"\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059...\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044..."),t.qZA()())}function $(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.isShowingTotalPrice=!0)}),t.TgZ(2,"mat-icon"),t._uU(3,"currency_yen"),t.qZA()(),t.BQk()}}function X(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"currency"),t.ALo(3,"currency"),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.Dn7(2,2,e.totalPrice.minPrice,"JPY",!0)," \u301c ",t.Dn7(3,6,e.totalPrice.maxPrice,"JPY",!0)," ")}}function tt(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"currency"),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.Dn7(2,1,e.totalPrice.minPrice,"JPY",!0)," ")}}function et(n,a){if(1&n&&(t.TgZ(0,"span",16),t.YNc(1,X,4,10,"ng-container",2),t.YNc(2,tt,3,5,"ng-container",2),t.qZA()),2&n){const e=t.oxw(3);t.Q6J("matTooltip",(e.isShowingArchivedItems?"\u30a2\u30fc\u30ab\u30a4\u30d6\u3055\u308c\u305f\u30b0\u30c3\u30ba\u3082\u542b\u3081\u3001\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u5546\u54c1\u306e\u5408\u8a08\u984d\u3067\u3059\u3002":"\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u5546\u54c1\u306e\u5408\u8a08\u984d\u3067\u3059\u3002")+(e.totalPrice.minPrice!==e.totalPrice.maxPrice?"\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u304c\u3042\u308b\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059":"")),t.xp6(1),t.Q6J("ngIf",e.totalPrice.minPrice!==e.totalPrice.maxPrice),t.xp6(1),t.Q6J("ngIf",e.totalPrice.minPrice===e.totalPrice.maxPrice)}}function nt(n,a){if(1&n&&(t.ynx(0),t.YNc(1,et,3,3,"span",15),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isShowingTotalPrice)}}function ot(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-goods-list-card",18),t.NdJ("itemChange",function(){t.CHM(e);const i=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.onItemStatusChange(i))}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("item",e)}}function it(n,a){if(1&n&&(t.ynx(0),t.YNc(1,ot,1,1,"app-goods-list-card",17),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!1===e.isArchived)}}function at(n,a){1&n&&t._UZ(0,"div",19)}function ut(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-icon",20),t._uU(2,"expand_less"),t.qZA(),t._uU(3),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" \u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u305f\u30b0\u30c3\u30ba\u3092\u975e\u8868\u793a (",e.numOfArchivedItems,"\u4ef6)\xa0 ")}}function st(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-icon",20),t._uU(2,"expand_more"),t.qZA(),t._uU(3),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" \u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u305f\u30b0\u30c3\u30ba\u3092\u8868\u793a (",e.numOfArchivedItems,"\u4ef6)\xa0 ")}}function rt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-goods-list-card",18),t.NdJ("itemChange",function(){t.CHM(e);const i=t.oxw().$implicit,u=t.oxw(3);return t.KtG(u.onItemStatusChange(i))}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("item",e)}}function ct(n,a){if(1&n&&(t.ynx(0),t.YNc(1,rt,1,1,"app-goods-list-card",17),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!0===e.isArchived)}}function dt(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"div",21),t.YNc(2,ct,2,1,"ng-container",11),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.items)}}function _t(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",9),t.YNc(2,$,4,0,"ng-container",2),t.YNc(3,nt,2,1,"ng-container",2),t.qZA(),t.TgZ(4,"div",10),t.YNc(5,it,2,1,"ng-container",11),t.qZA(),t.YNc(6,at,1,0,"div",12),t.TgZ(7,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleShowingArchive())}),t.YNc(8,ut,4,1,"ng-container",2),t.YNc(9,st,4,1,"ng-container",2),t.qZA(),t.YNc(10,dt,3,1,"ng-container",2),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.isShowingTotalPrice),t.xp6(1),t.Q6J("ngIf",e.isShowingTotalPrice),t.xp6(2),t.Q6J("ngForOf",e.items),t.xp6(1),t.Q6J("ngIf",e.isShowingArchivedItems),t.xp6(1),t.Q6J("matTooltip",e.isShowingArchivedItems?"\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u975e\u8868\u793a":"\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u8868\u793a")("disabled",0===e.numOfArchivedItems),t.xp6(1),t.Q6J("ngIf",e.isShowingArchivedItems),t.xp6(1),t.Q6J("ngIf",!e.isShowingArchivedItems),t.xp6(1),t.Q6J("ngIf",e.isShowingArchivedItems)}}const lt=[{path:"",component:(()=>{class n{constructor(e,o){this.goodsListService=e,this.snackBar=o,this.numOfArchivedItems=0,this.isShowingTotalPrice=!1,this.totalPrice={minPrice:0,maxPrice:0},this.isShowingArchivedItems=!1}ngOnInit(){var e=this;return(0,l.Z)(function*(){e.load()})()}load(){var e=this;return(0,l.Z)(function*(){try{e.items=yield e.goodsListService.getGoodsList(),e.calculateStatuses(e.items)}catch(o){e.snackBar.open(`\u30a8\u30e9\u30fc: ${o.message}`,"OK")}})()}onItemStatusChange(e){var o=this;return(0,l.Z)(function*(){if(yield o.goodsListService.setItemStatus(e.id,e.isChecked,e.isArchived),e.children)for(const i of e.children)yield o.goodsListService.setItemStatus(i.id,i.isChecked,!1);o.snackBar.open("\u5909\u66f4\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f",void 0,{duration:1e3}),o.calculateStatuses()})()}calculateStatuses(e){var o=this;return(0,l.Z)(function*(){e||(e=yield o.goodsListService.getGoodsList()),o.totalPrice=o.goodsListService.getTotalPriceByGoodsList(e,o.isShowingArchivedItems),o.numOfArchivedItems=e.filter(i=>i.isArchived).length})()}toggleShowingArchive(){var e=this;return(0,l.Z)(function*(){e.isShowingArchivedItems=!e.isShowingArchivedItems,e.totalPrice=e.goodsListService.getTotalPriceByGoodsList(yield e.goodsListService.getGoodsList(),e.isShowingArchivedItems)})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(B),t.Y36(S.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-goods-list-page"]],decls:32,vars:2,consts:[[1,"app-page-summary"],["class","app-card bordered",4,"ngIf"],[4,"ngIf"],[1,"app-card","bordered",2,"margin-top","1rem"],["href","https://twitter.com/arisu_newsfeed","target","_blank","rel","noopener"],["routerLink","/arisu-calendar"],[1,"app-bottom-navigation"],["routerLink","/"],[1,"app-card","bordered"],[1,"goods-total-summary"],[1,"goods-cards"],[4,"ngFor","ngForOf"],["class","divider",4,"ngIf"],["mat-stroked-button","","color","primary",2,"margin","2rem 0 1rem 0",3,"matTooltip","disabled","click"],["mat-icon-button","","matTooltip","\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u9805\u76ee\u306e\u7dcf\u984d\u3092\u8868\u793a",3,"click"],["class","goods-total-price",3,"matTooltip",4,"ngIf"],[1,"goods-total-price",3,"matTooltip"],["class","goods-card",3,"item","itemChange",4,"ngIf"],[1,"goods-card",3,"item","itemChange"],[1,"divider"],[2,"vertical-align","middle"],[1,"goods-cards","archived-goods-cards"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"\u3042\u308a\u3059\u30b0\u30c3\u30ba\u30ea\u30b9\u30c8 (\u03b1 ver.)"),t.qZA()(),t.YNc(3,z,3,0,"div",1),t.YNc(4,_t,11,9,"ng-container",2),t.TgZ(5,"div",3)(6,"p")(7,"small"),t._uU(8," \u203b \u901f\u5831\u6027\u30fb\u6b63\u78ba\u6027\u30fb\u7db2\u7f85\u6027\u306a\u3069\u306f\u4fdd\u8a3c\u3067\u304d\u307e\u305b\u3093\u3002"),t._UZ(9,"br"),t._uU(10," \u307e\u305f\u3001\u4e88\u544a\u306a\u304f\u3001\u66f4\u65b0\u3092\u4f11\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u81ea\u5df1\u8cac\u4efb\u3067\u3054\u5229\u7528\u4e0b\u3055\u3044\u3002"),t._UZ(11,"br")(12,"br"),t._uU(13," \u203b \u5909\u66f4\u3057\u305f\u5185\u5bb9\u306f\u3001\u7aef\u672b\u5185\u306e\u307f\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002"),t._UZ(14,"br"),t._uU(15,"\u30d6\u30e9\u30a6\u30b6\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u6d88\u53bb\u306a\u3069\u3067\u6d88\u3048\u308b\u3053\u3068\u3082\u3042\u308b\u70ba\u3001\u304a\u307e\u3051\u7a0b\u5ea6\u306b\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002"),t._UZ(16,"br"),t._uU(17," \u306a\u304a\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u6a5f\u80fd\u306a\u3069\u306f\u3001\u73fe\u5728\u691c\u8a0e\u4e2d\u3067\u3059\u3002"),t._UZ(18,"br")(19,"br"),t._uU(20," \u203b \u65b0\u7740\u60c5\u5831\u306e\u30c1\u30a7\u30c3\u30af\u306b\u306f\u3001"),t.TgZ(21,"a",4),t._uU(22,"\u30cb\u30e5\u30fc\u30b9\u30fb\u30bf\u30c1\u30d0\u30ca"),t.qZA(),t._uU(23," \u3084\u3001"),t.TgZ(24,"a",5),t._uU(25,"\u3042\u308a\u3059\u30ab\u30ec\u30f3\u30c0\u30fc"),t.qZA(),t._uU(26," \u304c\u4fbf\u5229\u3067\u3059\u3002 "),t.qZA()()(),t.TgZ(27,"div",6)(28,"a",7)(29,"mat-icon"),t._uU(30,"navigate_before"),t.qZA(),t._uU(31," \xa0 \u30db\u30fc\u30e0\u3078"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf",void 0===o.items),t.xp6(1),t.Q6J("ngIf",void 0!==o.items))},dependencies:[_.sg,_.O5,f.rH,m.lW,m.RK,A.Hw,x.gM,W,_.H9],styles:[".wbr[_ngcontent-%COMP%]{word-break:keep-all;overflow-wrap:anywhere}h3[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.75rem}h4[_ngcontent-%COMP%]{font-size:.9rem;margin:0}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]{word-wrap:break-word;color:#4d75c2;transition:all .2s ease-in-out}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]:hover{opacity:.7}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]   .app-card[_ngcontent-%COMP%]{color:#333}.app-card[_ngcontent-%COMP%]{box-sizing:border-box;width:90vw;max-width:800px;padding:1.2rem 0;position:relative;background-color:#fff;border-radius:10px}.app-card.bordered[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;box-shadow:0 2px 4px #0003}.app-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.85rem;padding-left:2rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin:.5rem 0 .8rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:inline-block;margin-top:.2rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:square}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.25rem 0 .5rem}.app-page-summary[_ngcontent-%COMP%]{width:80vw;text-align:center}.app-page-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#555;font-size:1.5rem;font-weight:lighter;margin:0}.app-bottom-navigation[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;font-size:.8rem;text-decoration:none;margin-left:-1.5rem}.app-bottom-navigation[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#bddbfd;margin-bottom:0;vertical-align:middle}","[_nghost-%COMP%]{padding:1.5rem 1rem 3rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem}.app-card[_ngcontent-%COMP%]{padding:1rem 1rem .75rem}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:80vw;max-width:800px}.goods-total-summary[_ngcontent-%COMP%]{background-color:#fffd;border-radius:3rem;box-shadow:inset 0 0 0 1px #0000001a;padding:1rem 1.5rem 1rem 3rem;position:fixed;left:-2rem;bottom:1rem;z-index:10}.goods-total-summary[_ngcontent-%COMP%]   .goods-total-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#555;vertical-align:middle;margin-left:.25rem}.goods-cards[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;align-items:center;gap:2rem;width:80vw}.goods-cards[_ngcontent-%COMP%]   .goods-card[_ngcontent-%COMP%]{width:90vw;max-width:800px}small[_ngcontent-%COMP%]{font-size:.8rem}.divider[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#0002;margin:2rem 0}@media screen and (max-width: 768px){[_nghost-%COMP%]{padding-left:0;padding-right:0}.goods-cards[_ngcontent-%COMP%]{padding-left:0;padding-right:0;width:100vw}.goods-cards[_ngcontent-%COMP%]   .goods-card[_ngcontent-%COMP%]{width:95vw}.goods-total-summary[_ngcontent-%COMP%]{padding-left:2.25rem;padding-right:.75rem;bottom:2.5rem}}"]}),n})(),title:"\u3042\u308a\u3059\u30b0\u30c3\u30ba\u30ea\u30b9\u30c8"}];let gt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(lt),f.Bz]}),n})();var mt=r(7564);let pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.ez,gt,mt.m]}),n})()}}]);