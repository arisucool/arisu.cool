"use strict";(self.webpackChunkarisucool=self.webpackChunkarisucool||[]).push([[592],{7044:(A,x,S)=>{S.d(x,{H:()=>V});var O,w,I,p,v,l=S(5861);function b(o,a){if(!o)throw new Error(a)}const P=function(a,i,_){return(I=I||(0,l.Z)(function*(r,t,n){return new Promise((e,u)=>{const c=r.transaction(t,"readwrite"),s=c.objectStore(t).delete(String(n));c.oncomplete=()=>{e()},c.onabort=()=>{u(s.error?s.error:c.error)},c.onerror=()=>{u(s.error?s.error:c.error)}})})).apply(this,arguments)},T=({database:o,databaseName:a,tableName:i})=>{const _={delete:r=>P(o,i,r).then(()=>!0),get:r=>((o,a,i)=>new Promise((_,r)=>{const e=o.transaction(a,"readonly").objectStore(a).get(String(i));e.onsuccess=()=>{_(e.result)},e.onerror=()=>{r(e.error)}}))(o,i,r),has:r=>function(a,i,_){return(O=O||(0,l.Z)(function*(r,t,n){return new Promise((e,u)=>{const s=r.transaction(t,"readonly").objectStore(t).count(String(n));s.onsuccess=()=>{e(0!==s.result)},s.onerror=()=>{u(s.error)}})})).apply(this,arguments)}(o,i,r),set:(r,t)=>function(a,i,_,r){return(w=w||(0,l.Z)(function*(t,n,e,u){if(void 0!==u)return new Promise((c,y)=>{const s=t.transaction(n,"readwrite"),D=s.objectStore(n).put(u,String(e));s.oncomplete=()=>{c()},s.onabort=()=>{y(D.error?D.error:s.error)},s.onerror=()=>{y(D.error?D.error:s.error)}});yield P(t,n,e)})).apply(this,arguments)}(o,i,r,t).then(()=>_),clear:()=>function(a,i){return(p=p||(0,l.Z)(function*(_,r){return new Promise((t,n)=>{const e=_.transaction(r,"readwrite"),c=e.objectStore(r).clear();e.oncomplete=()=>{t()},e.onabort=()=>{n(c.error?c.error:e.error)},e.onerror=()=>{n(c.error?c.error:e.error)}})})).apply(this,arguments)}(o,i),dropInstance:()=>((o,a)=>new Promise((i,_)=>{o.close();const r=indexedDB.deleteDatabase(a);r.onupgradeneeded=t=>{t.preventDefault(),i()},r.onblocked=()=>{_(r.error)},r.onerror=function(){_(r.error)},r.onsuccess=function(){i()}}))(o,a),close:()=>Promise.resolve().then(()=>{o.close()}),[Symbol.asyncIterator]:()=>((o,a)=>{const t=o.transaction(a,"readonly").objectStore(a).openCursor();return{next:()=>(0,l.Z)(function*(){const{done:n,value:e}=yield(n=>new Promise((e,u)=>{n.onsuccess=()=>{const c=n.result;return e(c?{done:!1,value:c}:{done:!0})},n.onerror=()=>{u(n.error)}}))(t);if(!n){const u=e?.key,c=e?.value;return e?.continue(),{done:!1,value:[u,c]}}return{done:!0,value:void 0}})()}})(o,i),__debug__database__:o};return _},V=function(a){return(v=v||(0,l.Z)(function*(i){var _;const{name:r,version:t,upgrade:n,...e}=i;b("string"==typeof r,"name should be string"),b("number"==typeof t,"version should be number");const u=null!==(_=e.tableName)&&void 0!==_?_:"kvs",c=yield(({name:o,version:a,tableName:i,onUpgrade:_})=>new Promise((r,t)=>{const n=indexedDB.open(o,a);n.onupgradeneeded=function(e){var u;const c=e.oldVersion,y=null!==(u=e.newVersion)&&void 0!==u?u:a,s=n.result;try{(!y||y<=1)&&s.createObjectStore(i)}catch(E){t(E)}s.onversionchange=()=>{s.close()},e.target.transaction.oncomplete=(0,l.Z)(function*(){try{return yield _({oldVersion:c,newVersion:y,database:s}),r(s)}catch(E){return t(E)}})},n.onblocked=()=>{t(n.error)},n.onerror=function(){t(n.error)},n.onsuccess=function(){r(n.result)}}))({name:r,version:t,tableName:u,onUpgrade:({oldVersion:y,newVersion:s,database:E})=>{if(n)return n({kvs:T({database:E,tableName:u,databaseName:r}),oldVersion:y,newVersion:s})}});return T({database:c,tableName:u,databaseName:r})})).apply(this,arguments)}},2779:(A,x,S)=>{S.d(x,{g:()=>I});var l=S(5861),O=S(7044),w=S(5879);let I=(()=>{var p;class v{constructor(){this.CACHE_STORAGE_VERSION=1}init(){var d=this;return(0,l.Z)(function*(){d.storage||(d.storage=yield(0,O.H)({name:"arisucoolCache",version:d.CACHE_STORAGE_VERSION}))})()}getCachedJson(d,m){var f=this;return(0,l.Z)(function*(){if(yield f.init(),!f.storage)throw new Error("Storage not initialized");const h=yield f.storage.get(d);if(null===h)return;let g;try{g=JSON.parse(h)}catch{return}if(!g||!g.content||!g.createdAt)return;const P=(new Date).getTime();if(!(void 0!==m&&m<P-g.createdAt))return g.content;f.storage.delete(d)})()}setCachedJson(d,m){var f=this;return(0,l.Z)(function*(){if(yield f.init(),!f.storage)throw new Error("Storage not initialized");const h=(new Date).getTime();"string"==typeof m&&(m=JSON.parse(m)),f.storage.set(d,JSON.stringify({content:m,createdAt:h}))})()}}return(p=v).\u0275fac=function(d){return new(d||p)},p.\u0275prov=w.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),v})()},553:(A,x,S)=>{S.d(x,{N:()=>l});const l={SHOPPING_LIST_JSON_API_URL:"https://script.google.com/macros/s/AKfycbzqdzs-782d8b0FIVlV0zcDTEkFo65BaGtc212VO04FyOUH8wNs_nQiV4O6KmimQMLTUA/exec",NEWS_LIST_JSON_API_URL:"https://script.google.com/macros/s/AKfycbwmuORg2yKaHbqlxmXiflTU6QUXw9dXZDLbHQVIV183qK_iNMM9-2FSXD43RM4fVvrxgg/exec"}},5861:(A,x,S)=>{function l(w,I,p,v,b,d,m){try{var f=w[d](m),h=f.value}catch(g){return void p(g)}f.done?I(h):Promise.resolve(h).then(v,b)}function O(w){return function(){var I=this,p=arguments;return new Promise(function(v,b){var d=w.apply(I,p);function m(h){l(d,v,b,m,f,"next",h)}function f(h){l(d,v,b,m,f,"throw",h)}m(void 0)})}}S.d(x,{Z:()=>O})}}]);