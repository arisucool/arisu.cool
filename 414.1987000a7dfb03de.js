"use strict";(self.webpackChunkarisucool=self.webpackChunkarisucool||[]).push([[414],{9414:(ee,F,l)=>{l.r(F),l.d(F,{GoodsListModule:()=>te});var p=l(6814),O=l(1896),g=l(5861),t=l(5879),P=l(9347),A=l(2296),b=l(5986),y=l(6223),C=l(6825),v=l(7044),Z=l(553),m=function(e){return e[e.BEFORE_RESERVATION=0]="BEFORE_RESERVATION",e[e.RESERVATION=1]="RESERVATION",e[e.END_OF_RESERVATION=2]="END_OF_RESERVATION",e[e.BEFORE_SALE=3]="BEFORE_SALE",e[e.ON_SALE=4]="ON_SALE",e[e.END_OF_SALE=5]="END_OF_SALE",e[e.BEFORE_RESALE=6]="BEFORE_RESALE",e[e.ON_RESALE=7]="ON_RESALE",e[e.END_OF_RESALE=8]="END_OF_RESALE",e[e.UNKNOWN=9]="UNKNOWN",e}(m||{}),S=l(2779);let B=(()=>{var e;class i{constructor(a){this.appCacheService=a,this.GOODS_LIST_STORAGE_VERSION=1}init(){var a=this;return(0,g.Z)(function*(){a.storage||(a.storage=yield(0,v.H)({name:"arisucoolGoodsListItemStatus",version:a.GOODS_LIST_STORAGE_VERSION}))})()}getGoodsList(){var a=this;return(0,g.Z)(function*(){yield a.init();const o=yield a.appCacheService.getCachedJson("arisuGoodsList",i.GOODS_LIST_JSON_CACHE_EXPIRES);if(o)return yield a.injectStatuses(o);const s=yield fetch(Z.N.SHOPPING_LIST_JSON_API_URL);if(!s.ok)throw new Error("Failed to fetch goods list");const u=yield s.json();return a.appCacheService.setCachedJson("arisuGoodsList",u),yield a.injectStatuses(u)})()}getTotalPriceByGoodsList(a,o=!1){let s=0,u=0;for(const r of a)if(o||!r.isArchived)if(r.children){let d=this.getTotalPriceByGoodsList(r.children,o);s+=d.minPrice,u+=d.maxPrice}else{if(!r.isChecked)continue;s+=r.priceWithTax??0,u+=r.boxPriceWithTax??r.priceWithTax??0}return{minPrice:s,maxPrice:u}}isItemEndOfSale(a){if(!a.endOfSaleDate&&!a.confirmedEndOfSaleDate)return!1;const o=new Date,s=a.endOfResaleDate?new Date(a.endOfResaleDate):void 0,u=a.confirmedEndOfResaleDate?new Date(a.confirmedEndOfResaleDate):void 0;if(s){if(s<o)return!0;if(o<s)return!1}if(u&&u<o)return!0;const r=a.endOfSaleDate?new Date(a.endOfSaleDate):void 0,d=a.confirmedEndOfSaleDate?new Date(a.confirmedEndOfSaleDate):void 0;return!!(r&&r<o||d&&d<o)}setItemStatus(a,o,s,u){var r=this;return(0,g.Z)(function*(){if(yield r.init(),!r.storage)throw new Error("Failed to init storage");r.storage.set(a.toString(),{note:void 0,isChecked:o,isArchived:s,paymentYearMonth:u})})()}injectStatuses(a){var o=this;return(0,g.Z)(function*(){let s=[];for(const u of a){if(!u||isNaN(u.id))continue;const r=o.getItemSalesStatus(u);let d=o.getEstimatedPaymentYearMonth(u);u.children&&(u.children=yield o.injectStatuses(u.children)),s.push({...u,salesStatus:r,estimatedPaymentYearMonth:d,isChecked:!1,isArchived:!1})}for(const u of s){const r=yield o.storage?.get(u.id.toString());u.isChecked=!!r&&r.isChecked,u.isArchived=!!r&&r.isArchived,u.selectedPaymentYearMonth=r?r.paymentYearMonth:""}return s=s.sort((u,r)=>void 0===u.reservationStartDate?1:void 0===r.reservationStartDate?-1:new Date(r.reservationStartDate).getTime()-new Date(u.reservationStartDate).getTime()),s=s.sort((u,r)=>void 0===u.saleDate||void 0===r.saleDate?0:new Date(r.saleDate).getTime()-new Date(u.saleDate).getTime()),s})()}getItemSalesStatus(a,o=new Date){let s=this.isItemEndOfSale(a),u=m.UNKNOWN;if(s)u=m.END_OF_SALE;else{const r=a.reservationStartDate;if(r){if(new Date(r)>o)return u=m.BEFORE_RESERVATION,u;u=m.RESERVATION}const d=a.reservationEndDate;if(d){const x=new Date(d);if(u===m.RESERVATION&&x>o)return u;x<o&&(u=m.END_OF_RESERVATION)}const c=a.saleDate;if(c)if(new Date(c)>o){if(u===m.RESERVATION)return u;u=m.BEFORE_SALE}else u=m.ON_SALE;const _=a.endOfSaleDate;_&&new Date(_)<o&&(u=m.END_OF_SALE);const h=a.resaleDate;h&&(u=new Date(h)>o?m.BEFORE_RESALE:m.ON_RESALE)}return u}getEstimatedPaymentYearMonth(a){let o=a.estimatedPaymentYearMonth;return o||(a.salesStatus===m.BEFORE_RESERVATION&&a.reservationStartDate?o=a.reservationStartDate:a.salesStatus===m.RESERVATION&&a.reservationEndDate||a.salesStatus===m.END_OF_RESERVATION&&a.reservationEndDate?o=a.reservationEndDate:a.salesStatus===m.BEFORE_SALE&&a.saleDate?o=a.saleDate:a.salesStatus===m.END_OF_SALE&&a.endOfSaleDate&&(o=a.endOfSaleDate)),o||(o=(new Date).toISOString().replace(/-/g,"/").slice(0,7)),o}}return(e=i).GOODS_LIST_JSON_CACHE_EXPIRES=18e5,e.\u0275fac=function(a){return new(a||e)(t.LFG(S.g))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),i})();var T=l(1175),f=l(5313),D=l(2596);function w(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"\u5e74\u6708"),t.qZA())}function N(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.yearMonth)}}function R(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"\u5408\u8a08\u91d1\u984d"),t.qZA())}function k(e,i){if(1&e&&(t.TgZ(0,"span",15),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.maxPrice,"JPY","symbol")," ")}}function L(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"currency"),t.YNc(3,k,3,5,"span",14),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,2,n.minPrice,"JPY","symbol")," "),t.xp6(2),t.Q6J("ngIf",n.maxPrice&&n.maxPrice!=n.minPrice)}}function G(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"\u6570"),t.qZA())}function Y(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.numOfGoods)}}function I(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"\xa0"),t.qZA())}function J(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function Q(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}function U(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",13)(1,"button",17),t.NdJ("click",function(o){const u=t.CHM(n).$implicit,r=t.oxw();return r.expandedElement=r.expandedElement===u?null:u,t.KtG(o.stopPropagation())}),t.YNc(2,J,2,0,"mat-icon",18),t.YNc(3,Q,2,0,"mat-icon",18),t.qZA()()}if(2&e){const n=i.$implicit,a=t.oxw();t.xp6(2),t.Q6J("ngIf",a.expandedElement!==n),t.xp6(1),t.Q6J("ngIf",a.expandedElement===n)}}function q(e,i){if(1&e&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,n.priceWithTax,"JPY","symbol")," ")}}function j(e,i){if(1&e&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.boxPriceWithTax,"JPY","symbol")," ")}}function $(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"li"),t._uU(2),t.YNc(3,q,3,5,"span",21),t.YNc(4,j,3,5,"span",22),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n.name," \xa0\xa0 "),t.xp6(1),t.Q6J("ngIf",n.priceWithTax),t.xp6(1),t.Q6J("ngIf",n.boxPriceWithTax)}}function H(e,i){if(1&e&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,n.priceWithTax,"JPY","symbol")," ")}}function W(e,i){if(1&e&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.boxPriceWithTax,"JPY","symbol")," ")}}function K(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"li"),t._uU(2),t.YNc(3,H,3,5,"span",21),t.YNc(4,W,3,5,"span",22),t.qZA(),t.BQk()),2&e){const n=i.$implicit;t.xp6(2),t.hij(" ",n.name," \xa0\xa0 "),t.xp6(1),t.Q6J("ngIf",n.priceWithTax),t.xp6(1),t.Q6J("ngIf",n.boxPriceWithTax)}}function V(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"li"),t._uU(2),t.TgZ(3,"ul"),t.YNc(4,K,5,3,"ng-container",20),t.qZA()(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("ngForOf",n.children)}}function z(e,i){if(1&e&&(t.ynx(0),t.YNc(1,$,5,3,"ng-container",18),t.YNc(2,V,5,2,"ng-container",18),t.BQk()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf",!n.children),t.xp6(1),t.Q6J("ngIf",n.children)}}function X(e,i){if(1&e&&(t.TgZ(0,"td",13)(1,"div",19)(2,"ul"),t.YNc(3,z,3,2,"ng-container",20),t.qZA()()()),2&e){const n=i.$implicit,a=t.oxw();t.uIk("colspan",a.displayedColumnsExpand.length),t.xp6(1),t.Q6J("@detailExpand",n==a.expandedElement?"expanded":"collapsed"),t.xp6(2),t.Q6J("ngForOf",n.goods)}}function tt(e,i){1&e&&t._UZ(0,"tr",25)}function et(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"tr",26),t.NdJ("click",function(){const s=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.expandedElement=u.expandedElement===s?null:s)}),t.qZA()}if(2&e){const n=i.$implicit,a=t.oxw();t.ekj("table-expanded-row",a.expandedElement===n)}}function nt(e,i){1&e&&t._UZ(0,"tr",27)}const ot=function(){return["expandedDetail"]};let at=(()=>{var e;class i{constructor(a){this.goodsListService=a,this.paymentReports=[],this.isIncludeArchiveItems=!1,this.displayedColumns=["yearMonth","price","numOfGoods"],this.displayedColumnsExpand=[...this.displayedColumns,"expand"],this.expandedElement=null}ngOnInit(){var a=this;return(0,g.Z)(function*(){yield a.load()})()}load(){var a=this;return(0,g.Z)(function*(){let u=(yield a.goodsListService.getGoodsList()).map(c=>{if(c.isChecked)return c;if(c.children){const _=c.children.filter(h=>h.isChecked);if(_.length>0)return c.children=_,c}}).filter(c=>void 0!==c);a.isIncludeArchiveItems||(u=u.filter(c=>!c.isArchived));const r={};for(const c of u){const _=c.selectedPaymentYearMonth?c.selectedPaymentYearMonth:c.estimatedPaymentYearMonth;r[_]||(r[_]=[]),r[_].push(c)}let d=Object.keys(r).sort().reverse();a.paymentReports=[];for(const c of d){const _=r[c],h=a.goodsListService.getTotalPriceByGoodsList(_,a.isIncludeArchiveItems);a.paymentReports.push({yearMonth:c,minPrice:h.minPrice,maxPrice:h.maxPrice,goods:_,numOfGoods:_.length})}})()}ngOnChanges(){this.load()}}return(e=i).\u0275fac=function(a){return new(a||e)(t.Y36(B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-payment-report"]],inputs:{isIncludeArchiveItems:"isIncludeArchiveItems"},features:[t.TTD],decls:18,vars:5,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","yearMonth"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","numOfGoods"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-element-row",3,"table-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","table-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["matTooltip","\u3053\u306e\u5e74\u6708\u306f\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u304c\u3042\u308b\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",4,"ngIf"],["matTooltip","\u3053\u306e\u5e74\u6708\u306f\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u304c\u3042\u308b\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059"],["mat-header-cell","","aria-label","row actions"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[1,"table-element-detail"],[4,"ngFor","ngForOf"],["class","price",4,"ngIf"],["class","price","matTooltip","\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u306e\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",4,"ngIf"],[1,"price"],["matTooltip","\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u306e\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",1,"price"],["mat-header-row",""],["mat-row","",1,"table-element-row",3,"click"],["mat-row","",1,"table-detail-row"]],template:function(a,o){1&a&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,w,2,0,"th",2),t.YNc(3,N,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,R,2,0,"th",2),t.YNc(6,L,4,6,"td",3),t.BQk(),t.ynx(7,5),t.YNc(8,G,2,0,"th",2),t.YNc(9,Y,2,1,"td",3),t.BQk(),t.ynx(10,6),t.YNc(11,I,2,0,"th",7),t.YNc(12,U,4,2,"td",3),t.BQk(),t.ynx(13,8),t.YNc(14,X,4,3,"td",3),t.BQk(),t.YNc(15,tt,1,0,"tr",9),t.YNc(16,et,1,2,"tr",10),t.YNc(17,nt,1,0,"tr",11),t.qZA()),2&a&&(t.Q6J("dataSource",o.paymentReports),t.xp6(15),t.Q6J("matHeaderRowDef",o.displayedColumnsExpand),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumnsExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(4,ot)))},dependencies:[p.sg,p.O5,A.RK,T.Hw,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,D.gM,p.H9],styles:["table[_ngcontent-%COMP%]{box-shadow:0 0 5px #0000001a}tr.table-detail-row[_ngcontent-%COMP%]{height:0}tr.table-element-row[_ngcontent-%COMP%]:not(.table-expanded-row):hover{background:whitesmoke}tr.table-element-row[_ngcontent-%COMP%]:not(.table-expanded-row):active{background:#efefef}.table-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.table-element-detail[_ngcontent-%COMP%]{background-color:#fff;overflow:hidden;display:flex}.table-element-detail[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-bottom:1rem}.table-element-detail[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.table-element-detail[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:.8rem}"],data:{animation:[(0,C.X$)("detailExpand",[(0,C.SB)("collapsed",(0,C.oB)({height:"0px",minHeight:"0"})),(0,C.SB)("expanded",(0,C.oB)({height:"*"})),(0,C.eR)("expanded <=> collapsed",(0,C.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),i})(),it=(()=>{var e;class i{constructor(a){this.dialogRef=a,this.isIncludeArchiveItems=!1}}return(e=i).\u0275fac=function(a){return new(a||e)(t.Y36(P.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-payment-report-dialog"]],decls:8,vars:2,consts:[[3,"isIncludeArchiveItems"],["align","end"],[3,"ngModel","ngModelChange"],[2,"flex","1 1 auto"],["mat-dialog-close","","mat-stroked-button","","color","primary"]],template:function(a,o){1&a&&(t.TgZ(0,"mat-dialog-content"),t._UZ(1,"app-goods-payment-report",0),t.qZA(),t.TgZ(2,"mat-dialog-actions",1)(3,"mat-checkbox",2),t.NdJ("ngModelChange",function(u){return o.isIncludeArchiveItems=u}),t._uU(4,"\u30a2\u30fc\u30ab\u30a4\u30d6\u6e08\u307f\u3092\u542b\u3081\u308b"),t.qZA(),t._UZ(5,"span",3),t.TgZ(6,"button",4),t._uU(7,"OK"),t.qZA()()),2&a&&(t.xp6(1),t.Q6J("isIncludeArchiveItems",o.isIncludeArchiveItems),t.xp6(2),t.Q6J("ngModel",o.isIncludeArchiveItems))},dependencies:[A.lW,b.oG,P.ZT,P.xY,P.H8,y.JJ,y.On,at]}),i})();var ut=l(2939),E=l(5195),M=l(7988);function st(e,i){if(1&e&&(t.TgZ(0,"span",19),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,n.item.reservationStartDate,"yyyy/MM/dd")," \u304b\u3089 ")}}function rt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",17),t._uU(2," \u4e88\u7d04\u958b\u59cb\u524d "),t.qZA(),t.YNc(3,st,3,4,"span",18),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.item.reservationStartDate)}}function ct(e,i){if(1&e&&(t.TgZ(0,"span",22),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,n.item.reservationEndDate,"yyyy/MM/dd")," \u307e\u3067 ")}}function lt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",20),t._uU(2," \u4e88\u7d04\u53d7\u4ed8\u4e2d "),t.qZA(),t.YNc(3,ct,3,4,"span",21),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.item.reservationEndDate)}}function mt(e,i){1&e&&(t.ynx(0),t.TgZ(1,"span",23),t._uU(2," \u4e88\u7d04\u7d42\u4e86 "),t.qZA(),t.BQk())}function dt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",24),t._uU(2," \u767a\u58f2\u524d "),t.qZA(),t.TgZ(3,"span",25),t._uU(4),t.ALo(5,"date"),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(4),t.hij(" ",t.xi3(5,1,n.item.saleDate,"yyyy/MM/dd")," \u304b\u3089 ")}}function _t(e,i){1&e&&(t.ynx(0),t.TgZ(1,"span",26),t._uU(2," \u8ca9\u58f2\u4e2d "),t.qZA(),t.BQk())}function pt(e,i){1&e&&(t.ynx(0),t.TgZ(1,"span",27),t._uU(2," \u7d42\u58f2 "),t.qZA(),t.BQk())}function gt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",28),t._uU(2," \u518d\u8ca9\u524d "),t.qZA(),t.TgZ(3,"span",29),t._uU(4),t.ALo(5,"date"),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(4),t.hij(" ",t.xi3(5,1,n.item.resaleDate,"yyyy/MM/dd")," \u304b\u3089 ")}}function ft(e,i){if(1&e&&(t.TgZ(0,"span",32),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,n.item.endOfResaleDate,"yyyy/MM/dd")," \u307e\u3067 ")}}function Ct(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",30),t._uU(2," \u518d\u8ca9\u4e2d "),t.qZA(),t.YNc(3,ft,3,4,"span",31),t.BQk()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.item.endOfResaleDate)}}function ht(e,i){1&e&&(t.ynx(0),t.TgZ(1,"span",33),t._uU(2," \u518d\u8ca9\u7d42\u4e86 "),t.qZA(),t.BQk())}function At(e,i){1&e&&(t.ynx(0),t.TgZ(1,"span",34),t._uU(2," \u4e0d\u660e "),t.qZA(),t.BQk())}function Et(e,i){if(1&e&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,n.priceWithTax,"JPY","symbol")," ")}}function xt(e,i){if(1&e&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.boxPriceWithTax,"JPY","symbol")," ")}}function Pt(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-checkbox",35),t.NdJ("ngModelChange",function(o){const u=t.CHM(n).$implicit;return t.KtG(u.isChecked=o)})("ngModelChange",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.itemChange.emit(o.item))}),t._uU(2),t.YNc(3,Et,3,5,"span",36),t.YNc(4,xt,3,5,"span",37),t.qZA(),t.BQk()}if(2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngModel",n.isChecked),t.xp6(1),t.hij(" ",n.name," \xa0\xa0 "),t.xp6(1),t.Q6J("ngIf",n.priceWithTax),t.xp6(1),t.Q6J("ngIf",n.boxPriceWithTax)}}function yt(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Pt,5,4,"ng-container",14),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.item.children)}}function Ot(e,i){if(1&e&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",t.Dn7(2,1,n.item.priceWithTax,"JPY","symbol")," ")}}function Tt(e,i){if(1&e&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" \u301c ",t.Dn7(2,1,n.item.boxPriceWithTax,"JPY","symbol")," ")}}function Dt(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-checkbox",35),t.NdJ("ngModelChange",function(o){t.CHM(n);const s=t.oxw();return t.KtG(s.item.isChecked=o)})("ngModelChange",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.itemChange.emit(o.item))}),t._uU(2),t.YNc(3,Ot,3,5,"span",36),t.YNc(4,Tt,3,5,"span",37),t.qZA(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.item.isChecked),t.xp6(1),t.hij(" ",n.item.name," \xa0\xa0 "),t.xp6(1),t.Q6J("ngIf",n.item.priceWithTax),t.xp6(1),t.Q6J("ngIf",n.item.boxPriceWithTax)}}function Mt(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check_box"),t.qZA())}function Ft(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check_box_outline_blank"),t.qZA())}function bt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",40),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(2),t.hij(" ",n.item.selectedPaymentYearMonth," ")}}function Bt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",41),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(2),t.hij(" ",n.item.estimatedPaymentYearMonth," ")}}function vt(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",42),t.NdJ("click",function(){const s=t.CHM(n).$implicit,u=t.oxw();return u.item.selectedPaymentYearMonth=s.yearMonth,t.KtG(u.itemChange.emit(u.item))}),t._uU(2),t.qZA(),t.BQk()}if(2&e){const n=i.$implicit,a=t.oxw();t.xp6(1),t.Q6J("disabled",a.item.selectedPaymentYearMonth&&a.item.selectedPaymentYearMonth==n.yearMonth||!a.item.selectedPaymentYearMonth&&a.item.estimatedPaymentYearMonth==n.yearMonth),t.xp6(1),t.hij(" ",n.label," ")}}function Zt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return o.item.isArchived=!0,t.KtG(o.itemChange.emit(o.item))}),t.TgZ(1,"mat-icon"),t._uU(2,"archive"),t.qZA()()}}function St(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return o.item.isArchived=!1,t.KtG(o.itemChange.emit(o.item))}),t.TgZ(1,"mat-icon"),t._uU(2,"unarchive"),t.qZA()()}}const wt=function(e,i,n,a,o,s,u,r,d,c){return{"sales-before-reservation":e,"sales-reservation":i,"sales-end-of-reservation":n,"sales-before-sale":a,"sales-on-sale":o,"sales-end-of-sale":s,"sales-before-resale":u,"sales-on-resale":r,"sales-end-of-resale":d,"sales-unknown":c}};let Nt=(()=>{var e;class i{constructor(){this.itemChange=new t.vpe,this.salesStatus=m,this.paymentYearMonths=[]}ngOnInit(){this.init()}init(){this.paymentYearMonths=[];let a=(new Date).toISOString().slice(0,7);this.item.selectedPaymentYearMonth?a=this.item.selectedPaymentYearMonth:this.item.estimatedPaymentYearMonth&&(a=this.item.estimatedPaymentYearMonth);const o=Number(a.slice(0,4)),s=Number(a.slice(5,7));for(let u=-3;u<=6;u++){const r=o+Math.floor((s+u-1)/12),d=(s+u-1)%12+1;this.paymentYearMonths.push({yearMonth:`${r}/${d.toString().padStart(2,"0")}`,label:`${r}/${d.toString().padStart(2,"0")}`})}}toggleAllChecks(){const a=this.isAllChecked();if(this.item.isChecked=!a,this.item.children)for(const o of this.item.children)o.isChecked=!a}isAllChecked(){return this.item.children?this.item.children.every(a=>a.isChecked):this.item.isChecked}isPastDate(a){return new Date(a).getTime()<Date.now()}}return(e=i).\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-list-card"]],inputs:{item:"item"},outputs:{itemChange:"itemChange"},decls:41,vars:39,consts:[[3,"ngClass"],[1,"item-summary"],[4,"ngIf"],[1,"maker"],[1,"checklist"],[2,"display","flex","justify-content","end","gap","1rem","width","100%","padding-top","0"],["mat-icon-button","","color","primary","matTooltip","\u53c2\u8003\u30da\u30fc\u30b8\u3092\u958b\u304f","target","_blank","rel","noopener",3,"href","disabled"],[2,"margin-bottom","3px"],[2,"flex-grow","1"],["mat-icon-button","",3,"matTooltip","color","click"],["mat-icon-button","","color","primary",1,"payment-timing-button",3,"matMenuTriggerFor","matTooltip"],[1,"main"],[1,"arrow"],["paymentYearMonthMenu","matMenu"],[4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u89e3\u9664\u3059\u308b",3,"click",4,"ngIf"],[1,"sales-status","before-reservation"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u958b\u59cb\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u958b\u59cb\u65e5",1,"sales-date"],[1,"sales-status","reservation"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u7de0\u5207\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u4e88\u7d04\u7de0\u5207\u65e5",1,"sales-date"],[1,"sales-status","end-of-reservation"],[1,"sales-status","before-sale"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u767a\u58f2\u65e5",1,"sales-date"],[1,"sales-status","on-sale"],[1,"sales-status","end-of-sale"],[1,"sales-status","before-resale"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u518d\u8ca9\u65e5",1,"sales-date"],[1,"sales-status","on-resale"],["class","sales-date","matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u518d\u8ca9\u7d42\u4e86\u65e5",4,"ngIf"],["matTooltip","\u3053\u306e\u30b0\u30c3\u30ba\u306e\u518d\u8ca9\u7d42\u4e86\u65e5",1,"sales-date"],[1,"sales-status","end-of-resale"],[1,"sales-status","unknown"],[1,"checklist-item",3,"ngModel","ngModelChange"],["class","price",4,"ngIf"],["class","price","matTooltip","\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u306e\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",4,"ngIf"],[1,"price"],["matTooltip","\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u306e\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059",1,"price"],[1,"payment-year-month","selected"],[1,"payment-year-month","estimated"],["mat-menu-item","",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b",3,"click"],["mat-icon-button","","color","primary","matTooltip","\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u89e3\u9664\u3059\u308b",3,"click"]],template:function(a,o){if(1&a&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle",1),t.YNc(5,rt,4,1,"ng-container",2),t.YNc(6,lt,4,1,"ng-container",2),t.YNc(7,mt,3,0,"ng-container",2),t.YNc(8,dt,6,4,"ng-container",2),t.YNc(9,_t,3,0,"ng-container",2),t.YNc(10,pt,3,0,"ng-container",2),t.YNc(11,gt,6,4,"ng-container",2),t.YNc(12,Ct,4,1,"ng-container",2),t.YNc(13,ht,3,0,"ng-container",2),t.YNc(14,At,3,0,"ng-container",2),t.TgZ(15,"span",3),t._uU(16),t.qZA()()(),t.TgZ(17,"mat-card-content")(18,"div",4),t.YNc(19,yt,2,1,"ng-container",2),t.YNc(20,Dt,5,4,"ng-container",2),t.qZA()(),t.TgZ(21,"mat-card-actions",5)(22,"a",6)(23,"mat-icon",7),t._uU(24,"link"),t.qZA()(),t._UZ(25,"div",8),t.TgZ(26,"button",9),t.NdJ("click",function(){return o.toggleAllChecks(),o.itemChange.emit(o.item)}),t.YNc(27,Mt,2,0,"mat-icon",2),t.YNc(28,Ft,2,0,"mat-icon",2),t.qZA(),t.TgZ(29,"button",10)(30,"mat-icon",11),t._uU(31,"currency_yen"),t.qZA(),t.TgZ(32,"mat-icon",12),t._uU(33,"arrow_drop_down"),t.qZA(),t.YNc(34,bt,3,1,"ng-container",2),t.YNc(35,Bt,3,1,"ng-container",2),t.qZA(),t.TgZ(36,"mat-menu",null,13),t.YNc(38,vt,3,2,"ng-container",14),t.qZA(),t.YNc(39,Zt,3,0,"button",15),t.YNc(40,St,3,0,"button",16),t.qZA()()),2&a){const s=t.MAs(37);t.Q6J("ngClass",t.rFY(28,wt,[o.item.salesStatus===o.salesStatus.BEFORE_RESERVATION,o.item.salesStatus===o.salesStatus.RESERVATION,o.item.salesStatus===o.salesStatus.END_OF_RESERVATION,o.item.salesStatus===o.salesStatus.BEFORE_SALE,o.item.salesStatus===o.salesStatus.ON_SALE,o.item.salesStatus===o.salesStatus.END_OF_SALE,o.item.salesStatus===o.salesStatus.BEFORE_RESALE,o.item.salesStatus===o.salesStatus.ON_RESALE,o.item.salesStatus===o.salesStatus.END_OF_RESALE,o.item.salesStatus===o.salesStatus.UNKNOWN])),t.xp6(3),t.hij(" ",o.item.name,""),t.xp6(2),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.BEFORE_RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.END_OF_RESERVATION),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.BEFORE_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.ON_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.END_OF_SALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.BEFORE_RESALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.ON_RESALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.END_OF_RESALE),t.xp6(1),t.Q6J("ngIf",o.item.salesStatus===o.salesStatus.UNKNOWN),t.xp6(2),t.hij(" ",o.item.maker||"-"," "),t.xp6(3),t.Q6J("ngIf",o.item.children&&o.item.children.length>=1),t.xp6(1),t.Q6J("ngIf",!o.item.children||1==o.item.children.length),t.xp6(2),t.Q6J("href",o.item.url,t.LSH)("disabled",!o.item.url),t.xp6(4),t.Q6J("matTooltip",o.isAllChecked()?"\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059":"\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u308b")("color",o.isAllChecked()?"accent":""),t.xp6(1),t.Q6J("ngIf",o.isAllChecked()),t.xp6(1),t.Q6J("ngIf",!o.isAllChecked()),t.xp6(1),t.Q6J("matMenuTriggerFor",s)("matTooltip",o.item.selectedPaymentYearMonth?"\u6708\u3054\u3068\u306e\u5408\u8a08\u91d1\u984d\u3092\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b0\u30c3\u30ba\u306e\u652f\u6255\u3044\u6642\u671f\u306f "+o.item.selectedPaymentYearMonth+" \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002":"\u6708\u3054\u3068\u306e\u5408\u8a08\u91d1\u984d\u3092\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b0\u30c3\u30ba\u306e\u63a8\u6e2c\u3055\u308c\u308b\u652f\u6255\u3044\u6642\u671f\u306f"+o.item.estimatedPaymentYearMonth+"\u3067\u3059\u3002\u3000\u3000\u3000\u305f\u3060\u3057\u3001\u4fdd\u8a3c\u3059\u308b\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u652f\u6255\u3044\u65b9\u6cd5\u3001\u5e97\u8217\u3001\u8ca9\u58f2\u306e\u7a2e\u985e\u306b\u3088\u3063\u3066\u3082\u7570\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u5834\u5408\u306f\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u5e74\u6708\u3092\u9078\u3093\u3067\u304f\u3060\u3055\u3044\u3002"),t.xp6(5),t.Q6J("ngIf",o.item.selectedPaymentYearMonth),t.xp6(1),t.Q6J("ngIf",!o.item.selectedPaymentYearMonth&&o.item.estimatedPaymentYearMonth),t.xp6(3),t.Q6J("ngForOf",o.paymentYearMonths),t.xp6(1),t.Q6J("ngIf",!o.item.isArchived),t.xp6(1),t.Q6J("ngIf",o.item.isArchived)}},dependencies:[p.mk,p.sg,p.O5,A.o6,A.RK,E.a8,E.hq,E.dn,E.dk,E.$j,E.n5,b.oG,T.Hw,M.VK,M.OP,M.p6,D.gM,y.JJ,y.On,p.H9,p.uU],styles:["mat-card[_ngcontent-%COMP%]{padding-left:.5rem}mat-card.sales-before-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #1abc9c}mat-card.sales-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-end-of-reservation[_ngcontent-%COMP%]{border-left:.5rem solid #7f8c8d}mat-card.sales-before-sale[_ngcontent-%COMP%]{border-left:.5rem solid #1abc9c}mat-card.sales-on-sale[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-end-of-sale[_ngcontent-%COMP%]{border-left:.5rem solid #7f8c8d}mat-card.sales-before-resale[_ngcontent-%COMP%]{border-left:.5rem solid #1abc9c}mat-card.sales-on-resale[_ngcontent-%COMP%]{border-left:.5rem solid #27ae60}mat-card.sales-end-of-resale[_ngcontent-%COMP%]{border-left:.5rem solid #7f8c8d}mat-card.sales-unknown[_ngcontent-%COMP%]{border-left:.5rem solid #aaaaaa}.item-summary[_ngcontent-%COMP%]   .sales-status.before-reservation[_ngcontent-%COMP%]{color:#1abc9c}.item-summary[_ngcontent-%COMP%]   .sales-status.reservation[_ngcontent-%COMP%]{color:#27ae60}.item-summary[_ngcontent-%COMP%]   .sales-status.end-of-reservation[_ngcontent-%COMP%]{color:#7f8c8d}.item-summary[_ngcontent-%COMP%]   .sales-status.before-sale[_ngcontent-%COMP%]{color:#1abc9c}.item-summary[_ngcontent-%COMP%]   .sales-status.on-sale[_ngcontent-%COMP%]{color:#27ae60}.item-summary[_ngcontent-%COMP%]   .sales-status.end-of-sale[_ngcontent-%COMP%]{color:#7f8c8d}.item-summary[_ngcontent-%COMP%]   .sales-status.before-resale[_ngcontent-%COMP%]{color:#1abc9c}.item-summary[_ngcontent-%COMP%]   .sales-status.on-resale[_ngcontent-%COMP%]{color:#27ae60}.item-summary[_ngcontent-%COMP%]   .sales-status.end-of-resale[_ngcontent-%COMP%]{color:#7f8c8d}.item-summary[_ngcontent-%COMP%]   .sales-status.unknown[_ngcontent-%COMP%]{color:#aaa}.item-summary[_ngcontent-%COMP%]   .sales-date[_ngcontent-%COMP%]{margin-left:1rem;font-weight:bolder}.item-summary[_ngcontent-%COMP%]   .maker[_ngcontent-%COMP%]{margin-left:2rem}.checklist[_ngcontent-%COMP%]{display:flex;flex-direction:column}.checklist[_ngcontent-%COMP%]   .checklist-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:.8rem}.payment-timing-button[_ngcontent-%COMP%]{position:relative}.payment-timing-button[_ngcontent-%COMP%]   mat-icon.main[_ngcontent-%COMP%]{position:relative;line-height:1rem}.payment-timing-button[_ngcontent-%COMP%]   mat-icon.arrow[_ngcontent-%COMP%]{position:absolute;top:.7rem;right:-.4rem;line-height:1.2rem;opacity:.8}.payment-timing-button[_ngcontent-%COMP%]   .payment-year-month[_ngcontent-%COMP%]{position:absolute;font-size:.8rem;bottom:.2rem;left:0;right:0;text-align:center}@media screen and (max-width: 768px){.maker[_ngcontent-%COMP%]{display:none}mat-card-content[_ngcontent-%COMP%]{padding-top:.25rem;padding-left:0}}"]}),i})();function Rt(e,i){1&e&&(t.TgZ(0,"div",8)(1,"p"),t._uU(2,"\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059...\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044..."),t.qZA()())}function kt(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",16),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.isShowingTotalPrice=!0)}),t.TgZ(2,"mat-icon"),t._uU(3,"currency_yen"),t.qZA()(),t.BQk()}}function Lt(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"currency"),t.ALo(3,"currency"),t.BQk()),2&e){const n=t.oxw(4);t.xp6(1),t.AsE(" ",t.Dn7(2,2,n.totalPrice.minPrice,"JPY","symbol")," \u301c ",t.Dn7(3,6,n.totalPrice.maxPrice,"JPY","symbol")," ")}}function Gt(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"currency"),t.BQk()),2&e){const n=t.oxw(4);t.xp6(1),t.hij(" ",t.Dn7(2,1,n.totalPrice.minPrice,"JPY","symbol")," ")}}function Yt(e,i){if(1&e&&(t.TgZ(0,"span",18),t.YNc(1,Lt,4,10,"ng-container",2),t.YNc(2,Gt,3,5,"ng-container",2),t.qZA()),2&e){const n=t.oxw(3);t.Q6J("matTooltip",(n.isShowingArchivedItems?"\u30a2\u30fc\u30ab\u30a4\u30d6\u3055\u308c\u305f\u30b0\u30c3\u30ba\u3082\u542b\u3081\u3001\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u5546\u54c1\u306e\u5408\u8a08\u984d\u3067\u3059\u3002":"\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u5546\u54c1\u306e\u5408\u8a08\u984d\u3067\u3059\u3002")+(n.totalPrice.minPrice!==n.totalPrice.maxPrice?"\u30e9\u30f3\u30c0\u30e0\u5546\u54c1\u304c\u3042\u308b\u305f\u3081\u3001\u5358\u4f53\u8cfc\u5165\u6642\u3068BOX\u8cfc\u5165\u6642\u76f8\u5f53\u306e\u4fa1\u683c\u5dee\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059":"")),t.xp6(1),t.Q6J("ngIf",n.totalPrice.minPrice!==n.totalPrice.maxPrice),t.xp6(1),t.Q6J("ngIf",n.totalPrice.minPrice===n.totalPrice.maxPrice)}}function It(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Yt,3,3,"span",17),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isShowingTotalPrice)}}function Jt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"app-goods-list-card",20),t.NdJ("itemChange",function(){t.CHM(n);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onItemStatusChange(o))}),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.Q6J("item",n)}}function Qt(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Jt,1,1,"app-goods-list-card",19),t.BQk()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf",!1===n.isArchived)}}function Ut(e,i){1&e&&t._UZ(0,"div",21)}function qt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",22),t._uU(2,"expand_less"),t.qZA(),t._uU(3),t.BQk()),2&e){const n=t.oxw(2);t.xp6(3),t.hij(" \u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u305f\u30b0\u30c3\u30ba\u3092\u975e\u8868\u793a (",n.numOfArchivedItems,"\u4ef6)\xa0 ")}}function jt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",22),t._uU(2,"expand_more"),t.qZA(),t._uU(3),t.BQk()),2&e){const n=t.oxw(2);t.xp6(3),t.hij(" \u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u305f\u30b0\u30c3\u30ba\u3092\u8868\u793a (",n.numOfArchivedItems,"\u4ef6)\xa0 ")}}function $t(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"app-goods-list-card",20),t.NdJ("itemChange",function(){t.CHM(n);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.onItemStatusChange(o))}),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.Q6J("item",n)}}function Ht(e,i){if(1&e&&(t.ynx(0),t.YNc(1,$t,1,1,"app-goods-list-card",19),t.BQk()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf",!0===n.isArchived)}}function Wt(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",23),t.YNc(2,Ht,2,1,"ng-container",13),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",n.items)}}function Kt(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",9),t.YNc(2,kt,4,0,"ng-container",2),t.YNc(3,It,2,1,"ng-container",2),t.qZA(),t.TgZ(4,"div",10)(5,"button",11),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.openPaymentReportDialog())}),t.TgZ(6,"mat-icon"),t._uU(7,"receipt_long"),t.qZA()()(),t.TgZ(8,"div",12),t.YNc(9,Qt,2,1,"ng-container",13),t.qZA(),t.YNc(10,Ut,1,0,"div",14),t.TgZ(11,"button",15),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.toggleShowingArchive())}),t.YNc(12,qt,4,1,"ng-container",2),t.YNc(13,jt,4,1,"ng-container",2),t.qZA(),t.YNc(14,Wt,3,1,"ng-container",2),t.BQk()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",!n.isShowingTotalPrice),t.xp6(1),t.Q6J("ngIf",n.isShowingTotalPrice),t.xp6(6),t.Q6J("ngForOf",n.items),t.xp6(1),t.Q6J("ngIf",n.isShowingArchivedItems),t.xp6(1),t.Q6J("matTooltip",n.isShowingArchivedItems?"\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u975e\u8868\u793a":"\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u8868\u793a")("disabled",0===n.numOfArchivedItems),t.xp6(1),t.Q6J("ngIf",n.isShowingArchivedItems),t.xp6(1),t.Q6J("ngIf",!n.isShowingArchivedItems),t.xp6(1),t.Q6J("ngIf",n.isShowingArchivedItems)}}const Vt=[{path:"",component:(()=>{var e;class i{constructor(a,o,s){this.goodsListService=a,this.snackBar=o,this.matDialog=s,this.numOfArchivedItems=0,this.isShowingTotalPrice=!1,this.totalPrice={minPrice:0,maxPrice:0},this.isShowingArchivedItems=!1}ngOnInit(){var a=this;return(0,g.Z)(function*(){a.load()})()}load(){var a=this;return(0,g.Z)(function*(){try{a.items=yield a.goodsListService.getGoodsList(),a.calculateStatuses(a.items)}catch(o){a.snackBar.open(`\u30a8\u30e9\u30fc: ${o.message}`,"OK")}})()}onItemStatusChange(a){var o=this;return(0,g.Z)(function*(){let s=a.selectedPaymentYearMonth??a.estimatedPaymentYearMonth;if(yield o.goodsListService.setItemStatus(a.id,a.isChecked,a.isArchived,s),a.children)for(const u of a.children)yield o.goodsListService.setItemStatus(u.id,u.isChecked,!1,s);o.snackBar.open("\u5909\u66f4\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f",void 0,{duration:1e3}),o.calculateStatuses()})()}calculateStatuses(a){var o=this;return(0,g.Z)(function*(){a||(a=yield o.goodsListService.getGoodsList()),o.totalPrice=o.goodsListService.getTotalPriceByGoodsList(a,o.isShowingArchivedItems),o.numOfArchivedItems=a.filter(s=>s.isArchived).length})()}toggleShowingArchive(){var a=this;return(0,g.Z)(function*(){a.isShowingArchivedItems=!a.isShowingArchivedItems,a.totalPrice=a.goodsListService.getTotalPriceByGoodsList(yield a.goodsListService.getGoodsList(),a.isShowingArchivedItems)})()}openPaymentReportDialog(){this.matDialog.open(it,{maxWidth:"96vw"})}}return(e=i).\u0275fac=function(a){return new(a||e)(t.Y36(B),t.Y36(ut.ux),t.Y36(P.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-goods-list-page"]],decls:32,vars:2,consts:[[1,"app-page-summary"],["class","app-card bordered",4,"ngIf"],[4,"ngIf"],[1,"app-card","bordered",2,"margin-top","1rem"],["href","https://twitter.com/arisu_newsfeed","target","_blank","rel","noopener"],["routerLink","/arisu-calendar"],[1,"app-bottom-navigation"],["routerLink","/"],[1,"app-card","bordered"],[1,"goods-total-summary"],[1,"goods-payment-report"],["mat-icon-button","","matTooltip","\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u9805\u76ee\u306b\u3064\u3044\u3066\u3001\u5e74\u6708\u3054\u3068\u306e\u652f\u6255\u3044\u984d\u3092\u8868\u793a",3,"click"],[1,"goods-cards"],[4,"ngFor","ngForOf"],["class","divider",4,"ngIf"],["mat-stroked-button","","color","primary",2,"margin","2rem 0 1rem 0",3,"matTooltip","disabled","click"],["mat-icon-button","","matTooltip","\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u9805\u76ee\u306e\u7dcf\u984d\u3092\u8868\u793a",3,"click"],["class","goods-total-price",3,"matTooltip",4,"ngIf"],[1,"goods-total-price",3,"matTooltip"],["class","goods-card",3,"item","itemChange",4,"ngIf"],[1,"goods-card",3,"item","itemChange"],[1,"divider"],[2,"vertical-align","middle"],[1,"goods-cards","archived-goods-cards"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"\u3042\u308a\u3059\u30b0\u30c3\u30ba\u30ea\u30b9\u30c8 (\u03b1 ver.)"),t.qZA()(),t.YNc(3,Rt,3,0,"div",1),t.YNc(4,Kt,15,9,"ng-container",2),t.TgZ(5,"div",3)(6,"p")(7,"small"),t._uU(8," \u203b \u901f\u5831\u6027\u30fb\u6b63\u78ba\u6027\u30fb\u7db2\u7f85\u6027\u306a\u3069\u306f\u4fdd\u8a3c\u3067\u304d\u307e\u305b\u3093\u3002"),t._UZ(9,"br"),t._uU(10," \u307e\u305f\u3001\u4e88\u544a\u306a\u304f\u3001\u66f4\u65b0\u3092\u4f11\u6b62\u30fb\u7d42\u4e86\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u81ea\u5df1\u8cac\u4efb\u3067\u3054\u5229\u7528\u4e0b\u3055\u3044\u3002"),t._UZ(11,"br")(12,"br"),t._uU(13," \u203b \u5909\u66f4\u3057\u305f\u5185\u5bb9\u306f\u3001\u7aef\u672b\u5185\u306e\u307f\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002"),t._UZ(14,"br"),t._uU(15,"\u30d6\u30e9\u30a6\u30b6\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u6d88\u53bb\u306a\u3069\u3067\u6d88\u3048\u308b\u3053\u3068\u3082\u3042\u308b\u70ba\u3001\u304a\u307e\u3051\u7a0b\u5ea6\u306b\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002"),t._UZ(16,"br"),t._uU(17," \u306a\u304a\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u6a5f\u80fd\u306a\u3069\u306f\u3001\u73fe\u5728\u691c\u8a0e\u4e2d\u3067\u3059\u3002"),t._UZ(18,"br")(19,"br"),t._uU(20," \u203b \u65b0\u7740\u60c5\u5831\u306e\u30c1\u30a7\u30c3\u30af\u306b\u306f\u3001"),t.TgZ(21,"a",4),t._uU(22,"\u30cb\u30e5\u30fc\u30b9\u30fb\u30bf\u30c1\u30d0\u30ca"),t.qZA(),t._uU(23," \u3084\u3001"),t.TgZ(24,"a",5),t._uU(25,"\u3042\u308a\u3059\u30ab\u30ec\u30f3\u30c0\u30fc"),t.qZA(),t._uU(26," \u304c\u4fbf\u5229\u3067\u3059\u3002 "),t.qZA()()(),t.TgZ(27,"div",6)(28,"a",7)(29,"mat-icon"),t._uU(30,"navigate_before"),t.qZA(),t._uU(31," \xa0 \u30db\u30fc\u30e0\u3078"),t.qZA()()),2&a&&(t.xp6(3),t.Q6J("ngIf",void 0===o.items),t.xp6(1),t.Q6J("ngIf",void 0!==o.items))},dependencies:[p.sg,p.O5,O.rH,A.lW,A.RK,T.Hw,D.gM,Nt,p.H9],styles:[".wbr[_ngcontent-%COMP%]{word-break:keep-all;overflow-wrap:anywhere}h3[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.75rem}h4[_ngcontent-%COMP%]{font-size:.9rem;margin:0}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]{word-wrap:break-word;color:#4d75c2;transition:all .2s ease-in-out}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]:hover{opacity:.7}a[_ngcontent-%COMP%]:not([mat-stroked-button], [mat-raised-button])[_ngcontent-%COMP%]   .app-card[_ngcontent-%COMP%]{color:#333}.app-card[_ngcontent-%COMP%]{box-sizing:border-box;width:90vw;max-width:800px;padding:1.2rem 0;position:relative;background-color:#fff;border-radius:10px}.app-card.bordered[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;box-shadow:0 2px 4px #0003}.app-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.85rem;padding-left:2rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin:.5rem 0 .8rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:inline-block;margin-top:.2rem}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:square}.app-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.25rem 0 .5rem}.app-page-summary[_ngcontent-%COMP%]{width:80vw;text-align:center}.app-page-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#555;font-size:1.5rem;font-weight:lighter;margin:0}.app-bottom-navigation[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;font-size:.8rem;text-decoration:none;margin-left:-1.5rem}.app-bottom-navigation[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#bddbfd;margin-bottom:0;vertical-align:middle}","[_nghost-%COMP%]{padding:1.5rem 1rem 3rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem}.app-card[_ngcontent-%COMP%]{padding:1rem 1rem .75rem}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:80vw;max-width:800px}.goods-total-summary[_ngcontent-%COMP%]{background-color:#fffd;border-radius:3rem;box-shadow:inset 0 0 0 1px #0000001a;padding:1rem 1.5rem 1rem 3rem;position:fixed;left:-2rem;bottom:1rem;z-index:10}.goods-total-summary[_ngcontent-%COMP%]   .goods-total-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#555;vertical-align:middle;margin-left:.25rem}.goods-payment-report[_ngcontent-%COMP%]{background-color:#fffd;border-radius:3rem;box-shadow:inset 0 0 0 1px #0000001a;padding:1rem 3rem 1rem 1.5rem;position:fixed;right:-2rem;bottom:1rem;z-index:10}.goods-cards[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;align-items:center;gap:2rem;width:80vw}.goods-cards[_ngcontent-%COMP%]   .goods-card[_ngcontent-%COMP%]{width:90vw;max-width:800px}small[_ngcontent-%COMP%]{font-size:.8rem}.divider[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#0002;margin:2rem 0}@media screen and (max-width: 768px){[_nghost-%COMP%]{padding-left:0;padding-right:0}.goods-cards[_ngcontent-%COMP%]{padding-left:0;padding-right:0;width:100vw}.goods-cards[_ngcontent-%COMP%]   .goods-card[_ngcontent-%COMP%]{width:95vw}.goods-total-summary[_ngcontent-%COMP%]{padding-left:2.25rem;padding-right:.75rem;bottom:2.5rem}.goods-payment-report[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:2.25rem;bottom:2.5rem}}"]}),i})(),title:"\u3042\u308a\u3059\u30b0\u30c3\u30ba\u30ea\u30b9\u30c8"}];let zt=(()=>{var e;class i{}return(e=i).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[O.Bz.forChild(Vt),O.Bz]}),i})();var Xt=l(7904);let te=(()=>{var e;class i{}return(e=i).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,zt,Xt.m]}),i})()}}]);