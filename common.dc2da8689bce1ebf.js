"use strict";(self.webpackChunkarisucool=self.webpackChunkarisucool||[]).push([[592],{6707:(E,v,g)=>{g.d(v,{H:()=>x});var d=g(5861);function I(t,o){if(!t)throw new Error(o)}const S=function(){var t=(0,d.Z)(function*(o,e,u){return new Promise((n,c)=>{const i=o.transaction(e,"readonly").objectStore(e).count(String(u));i.onsuccess=()=>{n(0!==i.result)},i.onerror=()=>{c(i.error)}})});return function(e,u,n){return t.apply(this,arguments)}}(),_=function(){var t=(0,d.Z)(function*(o,e,u,n){if(void 0!==n)return new Promise((c,s)=>{const r=o.transaction(e,"readwrite"),m=r.objectStore(e).put(n,String(u));r.oncomplete=()=>{c()},r.onabort=()=>{s(m.error?m.error:r.error)},r.onerror=()=>{s(m.error?m.error:r.error)}});yield f(o,e,u)});return function(e,u,n,c){return t.apply(this,arguments)}}(),f=function(){var t=(0,d.Z)(function*(o,e,u){return new Promise((n,c)=>{const s=o.transaction(e,"readwrite"),i=s.objectStore(e).delete(String(u));s.oncomplete=()=>{n()},s.onabort=()=>{c(i.error?i.error:s.error)},s.onerror=()=>{c(i.error?i.error:s.error)}})});return function(e,u,n){return t.apply(this,arguments)}}(),l=function(){var t=(0,d.Z)(function*(o,e){return new Promise((u,n)=>{const c=o.transaction(e,"readwrite"),r=c.objectStore(e).clear();c.oncomplete=()=>{u()},c.onabort=()=>{n(r.error?r.error:c.error)},c.onerror=()=>{n(r.error?r.error:c.error)}})});return function(e,u){return t.apply(this,arguments)}}(),a=({database:t,databaseName:o,tableName:e})=>{const u={delete:n=>f(t,e,n).then(()=>!0),get:n=>((t,o,e)=>new Promise((u,n)=>{const r=t.transaction(o,"readonly").objectStore(o).get(String(e));r.onsuccess=()=>{u(r.result)},r.onerror=()=>{n(r.error)}}))(t,e,n),has:n=>S(t,e,n),set:(n,c)=>_(t,e,n,c).then(()=>u),clear:()=>l(t,e),dropInstance:()=>((t,o)=>new Promise((e,u)=>{t.close();const n=indexedDB.deleteDatabase(o);n.onupgradeneeded=c=>{c.preventDefault(),e()},n.onblocked=()=>{u(n.error)},n.onerror=function(){u(n.error)},n.onsuccess=function(){e()}}))(t,o),close:()=>Promise.resolve().then(()=>{t.close()}),[Symbol.asyncIterator]:()=>((t,o)=>{const c=t.transaction(o,"readonly").objectStore(o).openCursor();return{next:()=>(0,d.Z)(function*(){const{done:s,value:r}=yield(s=>new Promise((r,i)=>{s.onsuccess=()=>{const m=s.result;return r(m?{done:!1,value:m}:{done:!0})},s.onerror=()=>{i(s.error)}}))(c);if(!s){const i=r?.key,m=r?.value;return r?.continue(),{done:!1,value:[i,m]}}return{done:!0,value:void 0}})()}})(t,e),__debug__database__:t};return u},x=function(){var t=(0,d.Z)(function*(o){var e;const{name:u,version:n,upgrade:c,...s}=o;I("string"==typeof u,"name should be string"),I("number"==typeof n,"version should be number");const r=null!==(e=s.tableName)&&void 0!==e?e:"kvs",i=yield(({name:t,version:o,tableName:e,onUpgrade:u})=>new Promise((n,c)=>{const s=indexedDB.open(t,o);s.onupgradeneeded=function(r){var i;const m=r.oldVersion,O=null!==(i=r.newVersion)&&void 0!==i?i:o,w=s.result;try{(!O||O<=1)&&w.createObjectStore(e)}catch(P){c(P)}w.onversionchange=()=>{w.close()},r.target.transaction.oncomplete=(0,d.Z)(function*(){try{return yield u({oldVersion:m,newVersion:O,database:w}),n(w)}catch(P){return c(P)}})},s.onblocked=()=>{c(s.error)},s.onerror=function(){c(s.error)},s.onsuccess=function(){n(s.result)}}))({name:u,version:n,tableName:r,onUpgrade:({oldVersion:m,newVersion:O,database:w})=>{if(c)return c({kvs:a({database:w,tableName:r,databaseName:u}),oldVersion:m,newVersion:O})}});return a({database:i,tableName:r,databaseName:u})});return function(e){return t.apply(this,arguments)}}()},1761:(E,v,g)=>{g.d(v,{g:()=>b});var d=g(5861),I=g(6707),y=g(4650);let b=(()=>{class p{constructor(){this.CACHE_STORAGE_VERSION=1}init(){var _=this;return(0,d.Z)(function*(){_.storage||(_.storage=yield(0,I.H)({name:"arisucoolCache",version:_.CACHE_STORAGE_VERSION}))})()}getCachedJson(_,f){var l=this;return(0,d.Z)(function*(){if(yield l.init(),!l.storage)throw new Error("Storage not initialized");const h=yield l.storage.get(_);if(null===h)return;let a;try{a=JSON.parse(h)}catch{return}if(!a||!a.content||!a.createdAt)return;const x=(new Date).getTime();if(!(void 0!==f&&f<x-a.createdAt))return a.content;l.storage.delete(_)})()}setCachedJson(_,f){var l=this;return(0,d.Z)(function*(){if(yield l.init(),!l.storage)throw new Error("Storage not initialized");const h=(new Date).getTime();"string"==typeof f&&(f=JSON.parse(f)),l.storage.set(_,JSON.stringify({content:f,createdAt:h}))})()}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275prov=y.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},2340:(E,v,g)=>{g.d(v,{N:()=>d});const d={SHOPPING_LIST_JSON_API_URL:"https://script.google.com/macros/s/AKfycbzqdzs-782d8b0FIVlV0zcDTEkFo65BaGtc212VO04FyOUH8wNs_nQiV4O6KmimQMLTUA/exec",NEWS_LIST_JSON_API_URL:"https://script.google.com/macros/s/AKfycbwmuORg2yKaHbqlxmXiflTU6QUXw9dXZDLbHQVIV183qK_iNMM9-2FSXD43RM4fVvrxgg/exec"}},5861:(E,v,g)=>{function d(y,b,p,S,_,f,l){try{var h=y[f](l),a=h.value}catch(x){return void p(x)}h.done?b(a):Promise.resolve(a).then(S,_)}function I(y){return function(){var b=this,p=arguments;return new Promise(function(S,_){var f=y.apply(b,p);function l(a){d(f,S,_,l,h,"next",a)}function h(a){d(f,S,_,l,h,"throw",a)}l(void 0)})}}g.d(v,{Z:()=>I})}}]);